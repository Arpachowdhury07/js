import { Callout } from "@doc";
import { createUnrealEngineMetadata } from "../../util";

export const metadata = createUnrealEngineMetadata({
    title: "Namespace de Thirdweb",
    description: "El Wrapper Principal de Rust",
});

# Thirdweb

El namespace `Thirdweb` es un envoltorio de bajo nivel alrededor de la librería `Thirdweb` en Rust, que proporciona un conjunto de funciones y clases auxiliares para interactuar con el SDK de Thirdweb.

<Callout variant='info' title="Nota">
	Aunque es accesible, este namespace está diseñado como un envoltorio interno. Toda la funcionalidad está expuesta en su lugar previsto a lo largo del plugin, y lo siguiente está documentado para posteridad.
</Callout>

## Estructuras

### **FFIResult**
Encapsula los resultados de la operación, devolviendo el estado de éxito y los mensajes.

#### Propiedades
- **`bool success`**: Estado de éxito del resultado de la operación
- **`const char* message`**: Mensaje del resultado de la operación

#### Funciones Miembro
- **`AssignResult(Output, bErrorOnlyResult)`**: Asigna el resultado y luego libera el puntero subyacente
- **`GetOutput()`**: Asigna el resultado directamente al output
- **`Free()`**: Libera el puntero subyacente para funciones que no tienen salida relevante
- **`Log()`**: Función de conveniencia para registrar todas las propiedades

## Funciones Internas

El namespace `Thirdweb` en `Thirdweb.h` ofrece varios métodos para gestionar billeteras e interactuar con contratos inteligentes. Ten en cuenta que los inputs pueden cambiar en versiones futuras, así que siempre consulta la documentación más reciente o el código fuente para obtener la información más precisa.

### Gestión de Billeteras

#### Billetera con Clave Privada
- **`create_private_key_wallet(private_key)`**: Crea una billetera utilizando una clave privada.
- **`generate_private_key_wallet()`**: Genera una nueva billetera con clave privada.
- **`private_key_wallet_export(handle_id)`**: Exporta la clave privada de una billetera.

#### Billetera In-App
- **`create_in_app_wallet(client_id, bundle_id, secret_key, email, storage_directory_path, auth_provider)`**: Crea una billetera in-app.
- **`in_app_wallet_send_otp_email(handle_id)`**: Envía un OTP para billetera de correo electrónico in-app.
- **`in_app_wallet_verify_otp_email(handle_id, otp)`**: Verifica un OTP para billetera de correo electrónico in-app.
- **`in_app_wallet_send_otp_phone(handle_id)`**: Envía un OTP para billetera de teléfono in-app.
- **`in_app_wallet_verify_otp_phone(handle_id, otp)`**: Verifica un OTP para billetera de teléfono in-app.
- **`in_app_wallet_fetch_oauth_login_link(handle_id, redirect_url)`**: Obtiene un enlace de login OAuth para billetera in-app.
- **`in_app_wallet_sign_in_with_oauth(handle_id, auth_result)`**: Inicia sesión con OAuth para billetera in-app.
- **`in_app_wallet_sign_in_with_jwt(handle_id, jwt, encryption_key)`**: Inicia sesión con JWT para billetera in-app.
- **`in_app_wallet_sign_in_with_auth_endpoint(handle_id, payload, encryption_key)`**: Inicia sesión con endpoint de autenticación para billetera in-app.
- **`in_app_wallet_sign_in_with_guest(handle_id, session_id)`**: Inicia sesión como invitado para billetera in-app.

### Billetera Ecosystem
- **`create_ecosystem_wallet(ecosystem_id, ecosystem_partner_id, client_id, bundle_id, secret_key, email, storage_directory_path, auth_provider)`**: Crea una billetera de ecosistema.
- **`ecosystem_wallet_send_otp_email(handle_id)`**: Envía un OTP para billetera de correo electrónico en ecosistema.
- **`ecosystem_wallet_verify_otp_email(handle_id, otp)`**: Verifica un OTP para billetera de correo electrónico en ecosistema.
- **`ecosystem_wallet_send_otp_phone(handle_id)`**: Envía un OTP para billetera de teléfono en ecosistema.
- **`ecosystem_wallet_verify_otp_phone(handle_id, otp)`**: Verifica un OTP para billetera de teléfono en ecosistema.
- **`ecosystem_wallet_fetch_oauth_login_link(handle_id, redirect_url)`**: Obtiene un enlace de login OAuth para billetera de ecosistema.
- **`ecosystem_wallet_sign_in_with_oauth(handle_id, auth_result)`**: Inicia sesión con OAuth para billetera de ecosistema.
- **`ecosystem_wallet_sign_in_with_jwt(handle_id, jwt)`**: Inicia sesión con JWT para billetera de ecosistema.
- **`ecosystem_wallet_sign_in_with_auth_endpoint(handle_id, payload)`**: Inicia sesión con endpoint de autenticación para billetera de ecosistema.
- **`ecosystem_wallet_sign_in_with_guest(handle_id, session_id)`**: Inicia sesión como invitado para billetera de ecosistema.

### Billetera Inteligente
- **`create_smart_wallet(client_id, bundle_id, secret_key, personal_wallet_handle_id, chain_id, gasless, factory, account_override)`**: Crea una billetera inteligente.
- **`smart_wallet_is_deployed(handle_id)`**: Verifica si la billetera inteligente está desplegada.
- **`smart_wallet_get_all_admins(handle_id)`**: Recupera todos los administradores de la billetera inteligente.
- **`smart_wallet_get_all_active_signers(handle_id)`**: Recupera todos los firmantes activos de la billetera inteligente.
- **`smart_wallet_create_session_key(handle_id, signer_address, approved_targets, approved_targets_count, native_token_limit_per_transaction_in_wei, permission_start_timestamp, permission_end_timestamp, req_validity_start_timestamp, req_validity_end_timestamp)`**: Crea una clave de sesión para la billetera inteligente.
- **`smart_wallet_revoke_session_key(handle_id, signer_address)`**: Revoca una clave de sesión para la billetera inteligente.
- **`smart_wallet_add_admin(handle_id, signer_address)`**: Agrega un administrador a la billetera inteligente.
- **`smart_wallet_remove_admin(handle_id, signer_address)`**: Elimina un administrador de la billetera inteligente.

### Utilidades
- **`get_wallet_address(handle_id)`**: Recupera la dirección de la billetera.
- **`sign_message(handle_id, message)`**: Firma un mensaje con la billetera.
- **`is_connected(handle_id)`**: Verifica si la billetera está conectada.
- **`disconnect(handle_id)`**: Desconecta la billetera.
- **`free_wallet(handle_id)`**: Libera el manejador de la billetera.
- **`free_ffi_result(result)`**: Libera el resultado FFI.
- **`free_string(result)`**: Libera la cadena.
- **`is_valid_address(address, check_checksum)`**: Valida una dirección de Ethereum.
- **`to_checksummed_address(address)`**: Convierte una dirección al formato con suma de control.
- **`is_valid_private_key(private_key)`**: Valida una clave privada.
- **`compute_client_id_from_secret_key(secret_key)`**: Obtiene el client id de una clave secreta.
- **`get_unix_timestamp_now()`**: Obtiene el timestamp Unix actual.
- **`get_unix_timestamp_in_ten_years()`**: Obtiene el timestamp Unix dentro de 10 años.

import { Stack, InstallTabs, Callout, Steps, Step, GithubTemplateCard } from "@doc";

# Primeros pasos

Puedes comenzar creando un nuevo proyecto o agregando thirdweb a un proyecto existente.

## Nuevos Proyectos

Puedes crear rápidamente un nuevo proyecto con la CLI de thirdweb

```bash
npx thirdweb create app
```

o clonar el repositorio de inicio de Next.js o Vite:

<Stack>
<GithubTemplateCard
	title="Next.js + thirdweb starter repo"
	descrption="A starter template for using the thirdweb package in a Next.js app"
	href="https://github.com/thirdweb-example/next-starter"
/>

<GithubTemplateCard
	title="Vite + thirdweb starter repo"
	descrption="A starter template for using the thirdweb package in a Vite app"
	href="https://github.com/thirdweb-example/vite-starter"
/>
</Stack>

## Proyectos existentes

Instala los paquetes de thirdweb en tu proyecto

<InstallTabs
	npm="npm i thirdweb"
	yarn="yarn add thirdweb"
	pnpm="pnpm i thirdweb"
    but="bun i thirdweb"
/>

## Construye tu aplicación

<Steps>
<Step title="Configura el ThirdwebProvider">

En la raíz de tu aplicación, envuelve tu aplicación con un componente `ThirdwebProvider`. Esto mantiene el estado, como la cartera activa y la cadena.

```tsx
// src/main.tsx
import { ThirdwebProvider } from "thirdweb/react";

function Main() {
	return (
		<ThirdwebProvider>
			<App />
		</ThirdwebProvider>
	);
}
```

</Step>

<Step title="Crea el cliente de thirdweb">

Dirígete al [panel de control de thirdweb](https://thirdweb.com/team), crea tu cuenta (o inicia sesión) y haz clic en **Proyectos** para ver todos tus proyectos.

Crea un proyecto con `localhost` incluido en los dominios permitidos. Almacena de forma segura tu clave secreta y copia tu ID de cliente para usarlo en el siguiente paso.

Crea un archivo `.env` y agrega tu ID de cliente allí. Luego crea un archivo `client.ts` con el siguiente contenido:

```tsx
// src/client.ts
import { createThirdwebClient } from "thirdweb";

export const client = createThirdwebClient({
  clientId: process.env.NEXT_PUBLIC_THIRDWEB_CLIENT_ID,
});
```

Solo necesitas definir el cliente una vez. Exportar la variable client te permitirá usarla en cualquier parte de tu aplicación.

</Step>

<Step title="Conectar una cartera">

Hay dos formas de conectar usuarios a tu aplicación:

- Los componentes preconstruidos `ConnectButton` o `ConnectEmbed`.
- Tu propio botón personalizado.

En esta guía, usaremos el componente preconstruido `ConnectButton`.

```tsx
// src/app.tsx
import { client }  from "./client";
import { ConnectButton } from 'thirdweb/react';

function App() {
  return (
    <div>
      <ConnectButton client={client} />
    </div>
  )
}
```

Los componentes `ConnectButton` y `ConnectEmbed` vienen con soporte integrado para más de 500 carteras, 2000 cadenas, integración de fiat, intercambio de cripto, seguimiento de transacciones y más.

También puedes crear tu propio botón personalizado usando el hook [`useConnect`](/react/v5/connecting-wallets/hooks).

</Step>

<Step title="Obtener la información de la cartera conectada">

Una vez que el usuario haya conectado su cartera, puedes obtener la dirección de la cartera, el saldo y otros detalles.

```tsx
import { useActiveAccount, useWalletBalance } from "thirdweb/react";

export default function App() {
	const account = useActiveAccount();
	const { data: balance, isLoading } = useWalletBalance({
		client,
		chain,
		address: account.address,
	});

	return <div>
        <p>Wallet address: {account.address}</p>
        <p>Wallet balance: {balance?.displayValue} {balance?.symbol}</p>
    </div>;
}
```

</Step>

<Step title="Leer datos de la blockchain">

Puedes leer el estado del contrato con el hook [`useReadContract`](/react/v5/useReadContract). Esto funciona con cualquier llamada a contrato. Simplemente especifica la firma de la función Solidity para obtener una API segura para tu contrato.

```tsx
import { client }  from "./client";
import { getContract } from "thirdweb";
import { sepolia } from "thirdweb/chains";
import { useReadContract } from "thirdweb/react";

const contract = getContract({ client, address: "0x...", chain: sepolia });

export default function App() {
	const { data, isLoading } = useReadContract({
    	contract,
   		method: "function tokenURI(uint256 tokenId) returns (string)",
    	params: [1n],  // type safe params
  	});

	return <div>
        <p>Token URI: {data}</p>
    </div>;
}
```

Usando [Extensiones](/react/v5/extensions) puedes realizar consultas poderosas como obtener todos los NFTs propiedad de una dirección específica, y generar funciones seguras y de alto rendimiento para tu contrato.

```tsx
import { client }  from "./client";
import { getContract } from "thirdweb";
import { sepolia } from "thirdweb/chains";
import { useReadContract } from "thirdweb/react";
import { getOwnedNFTs } from "thirdweb/extensions/erc721";

const contract = getContract({ client, address: "0x...", chain: sepolia });

export default function App() {
	const { data: ownedNFTs } = useReadContract(getOwnedNFTs, {
    contract,
    address: "0x...",
  });

	return <div>
        <p>Owned NFTs: {ownedNFTs}</p>
    </div>;
}
```

</Step>

<Step title="Ejecutar transacciones">

Puedes ejecutar transacciones con el hook [`useSendTransaction`](/react/v5/useSendTransaction). Prepara una transacción con la función [`prepareContractCall`](/references/typescript/v5/prepareContractCall) y pásala a la función `sendTransaction`.

```tsx
import { client }  from "./client";
import { getContract } from "thirdweb";
import { sepolia } from "thirdweb/chains";
import { useSendTransaction } from "thirdweb/react";

const contract = getContract({ client, address: "0x...", chain: sepolia });

export default function App() {
	const { mutate: sendTransaction } = useSendTransaction();

	const onClick = async () => {
		const transaction = prepareContractCall({
			contract,
			method: "function mint(address to)",
			params: ["0x..."], // type safe params
		});
		sendTransaction(transaction);
  	};

	return <div>
        <button onClick={onClick}>Mint</button>
    </div>;
}
```

Usando [Extensiones](/react/v5/extensions/use) puedes realizar transacciones más complejas como un reclamo, acuñación por lotes y más. Estas manejarán todo el procesamiento previo necesario antes de llamar al contrato.

```tsx
import { client }  from "./client";
import { getContract } from "thirdweb";
import { sepolia } from "thirdweb/chains";
import { useSendTransaction } from "thirdweb/react";
import { mintTo } from "thirdweb/extensions/erc721";

const contract = getContract({ client, address: "0x...", chain: sepolia });

export default function App() {
	const { mutate: sendTransaction } = useSendTransaction();

	const onClick = async () => {
		// this mint extension handles uploading metadata to IPFS and pining it
		const transaction = mintTo({
			contract,
			to: "0x...",
			nft: {
				name: "NFT Name",
				description: "NFT Description",
				image: "https://example.com/image.png",
			},
    	});
		sendTransaction(transaction);
  	};

	return <div>
        <button onClick={onClick}>Mint</button>
    </div>;
}
```

</Step>
</Steps>

## Aprende más

Ahora tienes todos los conceptos básicos para construir tu propia aplicación con thirdweb. También puedes consultar la [referencia completa del SDK de thirdweb](/references/typescript/v5) para aprender más sobre los diferentes hooks y funciones disponibles.

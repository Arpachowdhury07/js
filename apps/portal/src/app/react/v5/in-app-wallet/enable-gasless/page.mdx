import {
	OpenSourceCard,
	DocImage,
	ArticleIconCard,
	Stack,
	createMetadata,
	Callout,
} from "@doc";
import { ExternalLink } from "lucide-react";

export const metadata = createMetadata({
	image: {
		title: "Transacciones Patrocinadas | thirdweb",
		icon: "wallets",
	},
	title: "Patrocinar Transacciones con Abstracción de Cuentas",
	description:
		"Usando la abstracción de cuentas, puedes crear una experiencia de usuario realmente fluida con transacciones sin gas, transacciones agrupadas y recuperación completa de cuentas.",
});

# Transacciones Patrocinadas

Al usar [Abstracción de Cuentas](/connect/account-abstraction) o [Billeteras In-App](/connect/in-app-wallet/overview), puedes patrocinar todos los costos de gas para las transacciones de tus usuarios.

<Callout title="Transacciones patrocinadas" variant="info">

Para configurar transacciones patrocinadas, establece la opción `sponsorGas` en `true` en la configuración de la cuenta inteligente.
Todas las transacciones realizadas con la cuenta inteligente serán patrocinadas por tu aplicación. Las transacciones en testnet son gratuitas, pero necesitas una tarjeta de crédito válida para transacciones en mainnet.

</Callout>

## Playground en Vivo

Prueba la demostración por ti mismo en el [playground de transacciones patrocinadas](https://playground.thirdweb.com/connect/account-abstraction/sponsor)

<Stack>

<ArticleIconCard
	title="Prueba la demo"
	icon={ExternalLink}
	href="https://playground.thirdweb.com/connect/account-abstraction/sponsor"
	description="Mira el SDK en acción en el playground en vivo"
/>
</Stack>

## Patrocinar transacciones para todas las billeteras in-app

Para habilitar la abstracción de cuentas para billeteras in-app, necesitas agregar el prop `smartAccount` con la creación de `inAppWallet`.

```jsx
import { ConnectButton } from "thirdweb/react";
import { inAppWallet } from "thirdweb/wallets";
import { sepolia } from "thirdweb/chains";

const wallets = [inAppWallet({
	smartAccount: {
		chain: sepolia,
		sponsorGas: true,
	},
})];

export default function App() {
	return (
		<ThirdwebProvider>
			<ConnectButton
				client={client}
				wallets={wallets}
			/>
		</ThirdwebProvider>
	);
}
```

Esto creará una billetera in-app y una cuenta inteligente para el usuario. La cuenta inteligente será inicializada con la billetera in-app como la propietaria.

Puedes patrocinar transacciones simplemente pasando `sponsorGas: true` al prop `smartAccount`. Esto permitirá que la cuenta inteligente envíe transacciones sin que el usuario necesite tener ETH.

## Patrocinar transacciones para todas las billeteras conectadas

Para patrocinar transacciones para todas las billeteras conectadas, puedes usar el prop `sponsorGas` en el `ConnectButton` o el hook `useConnect`.

```jsx
import { createThirdwebClient } from "thirdweb";
import { ThirdwebProvider, ConnectButton } from "thirdweb/react";
 
const client = createThirdwebClient({
  clientId: "YOUR_CLIENT_ID",
});
 
export default function App() {
  return (
    <ThirdwebProvider>
      <ConnectButton
        client={client}
        accountAbstraction={{
          chain: sepolia, // la cadena donde se desplegarán o están desplegadas tus cuentas inteligentes
          sponsorGas: true, // habilitar o deshabilitar transacciones patrocinadas
        }}
      />
    </ThirdwebProvider>
  );
}
```

o con el hook `useConnect`:

```jsx
import { useConnect } from "thirdweb/react";
import { inAppWallet } from "thirdweb/wallets";
import { sepolia } from "thirdweb/chains";
 
function App() {
  // 1. Configura la configuración de `accountAbstraction` para convertir las billeteras en cuentas inteligentes
  const { connect } = useConnect({
    client,
    accountAbstraction: {
      chain: sepolia, // la cadena donde se desplegarán o están desplegadas tus cuentas inteligentes
      sponsorGas: true, // habilitar o deshabilitar transacciones patrocinadas
    },
  });
 
  const connectToSmartAccount = async () => {
    // 2. Conectar con la billetera admin de la cuenta inteligente
    connect(async () => {
      const wallet = createWallet("io.metamask"); // o cualquier otra billetera
      await wallet.connect({
        client,
        chain: sepolia,
      });
      return wallet;
    });
  };
 
  return (
    <button onClick={() => connectToSmartAccount()}>Connect</button>
  );
}
```

Una vez conectados, todas las transacciones enviadas a través del hook `useSendTransaction` o el componente `TransactionButton` serán patrocinadas.

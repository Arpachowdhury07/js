import {
  ArticleCard,
  GithubTemplateCard,
  Grid,
  ExpandableGrid,
  createMetadata,
  OpenSourceCard,
  Stack,
  Steps,
  Step,
  InstallTabs,
  Callout
} from "@doc";

[Migrar desde React v4](/react/v5/migrate)

# Instalación y Configuración

### Cambios principales

- Todas las importaciones de `@thirdweb-dev/*` deben reemplazarse con el SDK `thirdweb` con sub-exportaciones.
- El nuevo SDK está basado en `funciones` en lugar de `clases` para mejorar el tree shaking y el rendimiento.
- Todas las llamadas a contratos ahora se preparan usando `prepareContractCall` y se envían usando la función `useSendTransaction`.
- Las transacciones se envían sin esperar el recibo por defecto. Puedes llamar a la función `useSendAndConfirmTransaction` para esperar a que la transacción sea minada.


## Instalación

#### A continuación, te mostramos cómo instalar el SDK v4 de thirdweb
<InstallTabs
	npm="npm i @thirdweb-dev/sdk @thirdweb-dev/react ethers@5.7.2"
	yarn="yarn add @thirdweb-dev/sdk @thirdweb-dev/react ethers@5.7.2"
	pnpm="pnpm i @thirdweb-dev/sdk @thirdweb-dev/react ethers@5.7.2"
	bun="bun i @thirdweb-dev/sdk @thirdweb-dev/react ethers@5.7.2"
/>

#### Con la última versión, todo viene en un solo paquete
<InstallTabs
	npm="npm i thirdweb"
	yarn="yarn add thirdweb"
	pnpm="pnpm i thirdweb"
	bun="bun i thirdweb"
/>


## Configuración

Una vez que hayas instalado el paquete más reciente (junto con la versión anterior que deseas reemplazar), puedes comenzar el proceso de migración.

### ThirdwebProvider

En el SDK más reciente, el [`ThirdwebProvider`](/references/typescript/v5/ThirdwebProvider) ya no acepta propiedades como `activeChain`, `clientId` o cualquier otra opción adicional del SDK.
En su lugar, solo necesitas pasar el `clientId` cuando sea necesario (hablaremos más sobre esto en las siguientes secciones).

```tsx
import { ThirdwebProvider } from "thirdweb/react";

<ThirdwebProvider>
 ...
</ThirdwebProvider>
```

###### Migración progresiva

Si actualmente estás usando el `@thirdweb-dev/sdk`, puedes migrar progresivamente al nuevo SDK `thirdweb`. Ambos SDKs pueden usarse en paralelo y son interoperables entre sí.

En React, puedes combinar los `ThirdwebProvider` de v4 y v5, lo que te da acceso a los hooks y funcionalidades de ambos SDKs.  
De esta manera, una vez que hayas dejado de usar todas las funcionalidades de v4, finalmente podrás eliminar el `ThirdwebProviderV4` de tu aplicación.

```tsx
import { ThirdwebProvider as ThirdwebProviderV4 } from "@thirdweb-dev/react";
import { ThirdwebProvider } from "thirdweb/react"; // v5

<ThirdwebProviderV4 activeChain={...} clientId={...}>
  <ThirdwebProvider>
     ...
  </ThirdwebProvider>
</ThirdwebProviderV4>
```

### Conectar billeteras

Similar al componente `ConnectWallet` de v4, la versión más reciente tiene el componente [`ConnectButton`](/connect/sign-in/ConnectButton) que tiene la misma funcionalidad.

Sin embargo, a diferencia de v4, donde el número de billeteras soportadas es limitado (alrededor de 20), y agregar más billeteras hace que tu aplicación se vuelva más pesada,  
el SDK v5 soporta [más de 300 billeteras](/typescript/v5/supported-wallets) con prácticamente ningún impacto en tu aplicación.

Así es como usas el nuevo `ConnectButton`:

```tsx
import { createThirdwebClient } from "thirdweb";
import { ConnectButton } from "thirdweb/react";

const client = createThirdwebClient({
  clientId: process.env.NEXT_PUBLIC_TW_CLIENT_ID,
});

<ConnectButton client={client} />
```

Para aprender más sobre el nuevo `ConnectButton`, dirígete al [Playground](https://playground.thirdweb.com/connect/sign-in/button).

¿Notas cómo estás pasando el cliente de thirdweb al componente directamente y no al `ThirdwebProvider` como en v4?  
Al no poner toda la configuración dentro del wrapper del contexto, pudimos hacer que el SDK v5 sea mucho más ligero, ¡ya que solo cargas lo que necesitas!

Consejo: Puedes reutilizar el objeto del cliente de thirdweb colocándolo en un archivo y exportándolo.

```ts
// @lib/client.ts

import { createThirdwebClient } from "thirdweb";

export const client = createThirdwebClient({
  clientId: process.env.NEXT_PUBLIC_TW_CLIENT_ID,
});

```
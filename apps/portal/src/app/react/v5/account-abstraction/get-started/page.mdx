import {
	Grid,
	Callout,
	OpenSourceCard,
	ArticleIconCard,
	createMetadata,
	Steps,
	Step,
	Stack,
} from "@doc";
import { Tabs, TabsList, TabsTrigger, TabsContent } from "@/components/ui/tabs";
import { WalletsSmartIcon, TypeScriptIcon } from "@/icons";
import { ExternalLink } from "lucide-react";

export const metadata = createMetadata({
	image: {
		title: "Primeros pasos con la Abstracción de Cuentas",
		icon: "wallets",
	},
	title: "Primeros pasos con la Abstracción de Cuentas | thirdweb",
	description:
		"Comienza a agregar soporte para ERC-4337 Account Abstraction a tu aplicación fácilmente.",
});

# Cuentas Inteligentes ERC-4337

Convierte cualquier billetera en una cuenta inteligente ERC-4337 en tu aplicación.

- Permite que los usuarios **se conecten a su cuenta inteligente** usando cualquier billetera personal, incluidas billeteras integradas para una incorporación fácil.
- **Despliega automáticamente contratos de cuenta individuales** para tus usuarios cuando realicen su primera transacción en la cadena.
- **Patrocina los costos de gas para todas las transacciones** a través del paymaster de thirdweb.

<Callout title="Transacciones patrocinadas" variant="info">

Para configurar transacciones patrocinadas, establece la opción `sponsorGas` en `true` en la configuración de la cuenta inteligente.
Todas las transacciones realizadas con la cuenta inteligente serán patrocinadas por tu aplicación. Las transacciones en testnet son gratuitas, pero necesitas tener una tarjeta de crédito válida registrada para transacciones en mainnet.

</Callout>

## Live Playground

Prueba las billeteras integradas por ti mismo en el [live playground de billeteras integradas](https://playground.thirdweb.com/connect/account-abstraction/connect)

<Stack>

<ArticleIconCard
	title="Prueba la demostración"
	icon={ExternalLink}
	href="https://playground.thirdweb.com/connect/account-abstraction/connect"
	description="Ve el SDK en acción en el live playground"
/>

</Stack>


## Uso con los componentes UI de Connect

La forma más sencilla de comenzar con la abstracción de cuentas es usar el componente [ConnectButton](/connect/sign-in/ConnectButton). Simplemente agrega la propiedad `accountAbstraction` con la cadena deseada y si deseas patrocinar el gas para tus usuarios.

Con esta propiedad, todas las billeteras conectadas se convertirán automáticamente en cuentas inteligentes. La billetera conectada será la billetera administrativa de la cuenta inteligente.

```tsx
import { createThirdwebClient } from "thirdweb";
import { ThirdwebProvider, ConnectButton } from "thirdweb/react";

const client = createThirdwebClient({
clientId: "YOUR_CLIENT_ID",
});

export default function App() {
return (
    <ThirdwebProvider>
      <ConnectButton
	    client={client}
	    accountAbstraction={{
			chain: sepolia, // the chain where your smart accounts will be or is deployed
            sponsorGas: true // enable or disable sponsored transactions
        }}
	  />
    </ThirdwebProvider>
  );
}
```

También puedes configurarlo para que *solo* las billeteras dentro de la aplicación se conviertan en cuentas inteligentes, configurando la billetera dentro de la aplicación de manera individual. Otras billeteras externas no se convertirán en cuentas inteligentes con esta configuración.

```tsx
import { createThirdwebClient } from "thirdweb";
import { ThirdwebProvider, ConnectButton } from "thirdweb/react";

const client = createThirdwebClient({
clientId: "YOUR_CLIENT_ID",
});

const wallets = [inAppWallet({
	// only configure smart accounts for in-app wallets
	smartAccount: {
		chain: sepolia,
        sponsorGas: true
	}
}), 
// other external wallets will not become smart accounts
createWallet("io.metamask"), 
createWallet("rainbow.me"),
];

export default function App() {
return (
    <ThirdwebProvider>
      <ConnectButton
	    client={client}
	    wallets={wallets}
	  />
    </ThirdwebProvider>
  );
}
```

## Uso con tu propia interfaz

También puedes usar los hooks y funciones de conexión para conectarte a tus cuentas inteligentes y construir tu interfaz completamente personalizada.

```tsx
import { useConnect } from "thirdweb/react";
import { inAppWallet } from "thirdweb/wallets";
import { sepolia } from "thirdweb/chains";

function App() {
	// 1. set the `accountAbstraction` configuration to convert wallets to smart accounts
	const { connect } = useConnect({
		client,
		accountAbstraction: {
			chain: sepolia, // the chain where your smart accounts will be or is deployed
			sponsorGas: true, // enable or disable sponsored transactions
		},
	});

	const connectToSmartAccount = async () => {
		// 2. connect with the admin wallet of the smart account
		connect(async () => {
			const wallet = inAppWallet(); // or any other wallet
			await wallet.connect({
				client,
				chain: sepolia,
				strategy: "google",
			});
			return wallet;
		});
	};

	return <button onClick={() => connectToSmartAccount()}>Connect</button>;
}
```

<Callout title="Conexión automática de cuentas inteligentes" variant="info">
Al crear tu propia interfaz, recuerda también pasar la propiedad `accountAbstraction` a `useAutoConnect` para reconectar siempre a la cuenta inteligente al recargar la página.
</Callout>

Consulta la [referencia de la API de Smart Wallet](/references/typescript/v5/smartWallet) para una configuración más avanzada de tus cuentas inteligentes.

<Stack>

<ArticleIconCard
	title="Referencia de la API de Smart Wallet"
	icon={TypeScriptIcon}
	href="/references/typescript/v5/smartWallet"
	description="Configuración más avanzada de tus cuentas inteligentes"
/>

</Stack>

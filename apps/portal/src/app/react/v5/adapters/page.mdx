# Adaptadores

El SDK de thirdweb puede trabajar junto con:

- wagmi
- viem
- privy
- ethers.js v5
- ethers.js v6
- versiones anteriores del @thirdweb-dev/sdk (usando el adaptador de ethers.js v5)
- cualquier otra librería que cumpla con el estándar [EIP-1193](https://eips.ethereum.org/EIPS/eip-1193)

Los adaptadores te permiten usar contratos, proveedores y billeteras de estas librerías con el SDK de thirdweb y viceversa.

## Wagmi

### Usando billeteras in-app de thirdweb con wagmi

Puedes usar billeteras in-app y billeteras del ecosistema en tu aplicación wagmi utilizando el paquete `@thirdweb-dev/wagmi-adapter`.

```shell
npm install thirdweb @thirdweb-dev/wagmi-adapter
```

Asegúrate de estar utilizando wagmi 2.14.1 o superior.

Probablemente ya tengas una configuración de wagmi con algunos conectores, simplemente agrega el `inAppWalletConnector` a la lista, junto con las opciones deseadas.

```ts
import { http, createConfig } from "wagmi";
import { inAppWalletConnector } from "@thirdweb-dev/wagmi-adapter";
import { createThirdwebClient, defineChain as thirdwebChain } from "thirdweb";

const client = createThirdwebClient({
  clientId: "your-client-id",
});

export const config = createConfig({
  chains: [sepolia],
  connectors: [
    // add the in-app wallet connector
    inAppWalletConnector({
      client,
      // optional: turn on smart accounts!
      smartAccounts: {
        sponsorGas: true,
        chain: thirdwebChain(sepolia),
      },
    }),
  ],
  transports: {
    [sepolia.id]: http(),
  },
});
```

Luego, en tu aplicación, puedes usar el conector para activar la conexión de la billetera in-app.

```ts
const { connect, connectors } = useConnect();

const onClick = () => {
  // grab the connector
  const inAppWallet = connectors.find((x) => x.id === "in-app-wallet");
  // call connect with the desired strategy
  connect({
    connector: inAppWallet,
    strategy: "google",
  });
};
```

### Convertir un cliente de billetera wagmi a una billetera thirdweb

Puedes usar el SDK de thirdweb dentro de una aplicación wagmi configurando la cuenta conectada de wagmi como la 'billetera activa' de thirdweb. Después de eso, puedes usar todos los componentes y hooks de React normalmente, incluyendo `PayEmbed`, `TransactionButton`, etc.

```ts
// Se asume que has envuelto tu aplicación en un `<ThirdwebProvider>`

import { useEffect } from 'react'
import { defineChain } from 'thirdweb'
import { useSetActiveWallet } from 'thirdweb/react'
import { createWalletAdapter } from 'thirdweb/wallets'
import { useDisconnect, useSwitchChain, useWalletClient } from 'wagmi'
import { viemAdapter } from "thirdweb/adapters/viem";
import { client } from './client'


const account = useAccount(); // from wagmi
const setActiveWallet = useSetActiveWallet(); // from thirdweb/react

// whenever the wagmi account changes, 
// we adapt it to a thirdweb wallet and set it as the active wallet
  useEffect(() => {
    const setActive = async () => {
      if (account?.connector?.getProvider) {
        const provider = await account?.connector?.getProvider({
          chainId,
        });
        const thirdwebWallet = EIP1193.fromProvider({
          provider,
        });
        await thirdwebWallet.connect({
          client,
        });
        setActiveWallet(thirdwebWallet);
      }
    };
    setActive();
  }, [account?.connector?.getProvider, setActiveWallet]);
```

Puedes ver una aplicación completamente funcional de wagmi + thirdweb en este [repositorio de github](https://github.com/thirdweb-example/wagmi-thirdweb).

## Privy

De manera similar, puedes usar el SDK de thirdweb con privy configurando la billetera de privy como la 'billetera activa' de thirdweb. Después de eso, puedes usar todos los componentes, funciones y hooks de React normalmente, incluyendo `PayEmbed`, `TransactionButton`, etc.

```ts
// Assumes you've wrapped your application in a `<ThirdwebProvider>`

import { useEffect } from 'react'
import { defineChain } from 'thirdweb'
import { useSetActiveWallet } from 'thirdweb/react'
import { createWalletAdapter } from 'thirdweb/wallets'
import { ethers5Adapter } from 'thirdweb/adapters/ethers5';
import { client } from './client'
import { useWallets } from "@privy-io/react-auth";


const { wallets } = useWallets(); // from privy
const setActiveWallet = useSetActiveWallet(); // from thirdweb/react

// whenever the privy wallet changes, 
// we adapt it to a thirdweb account and set it as the active wallet
useEffect(() => {
    const setActive = async () => {
        const privyWallet = wallets[0];
        if (privyWallet) {
          const ethersProvider = await privyWallet.getEthersProvider();
            // create a thirdweb wallet with the privy provider
            const thirdwebWallet = EIP1193.fromProvider({
                provider: ethersProvider,
            });
            await thirdwebWallet.connect({
                client,
            });
            setActiveWallet(thirdwebWallet);
        }
    };
    setActive();
}, [wallets]);
```

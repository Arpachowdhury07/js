import { Callout, Steps, Step, GithubTemplateCard } from "@doc";

# Comenzando

### Instalación Automática

Recomendamos comenzar un nuevo proyecto de thirdweb React Native utilizando nuestra CLI, que configura todo automáticamente por ti.

En tu CLI, ejecuta:

```bash
npx thirdweb create app --react-native
```

o clona el repositorio [expo-starter](https://github.com/thirdweb-dev/expo-starter) usando git.

<GithubTemplateCard
	title="Expo + thirdweb demo repo"
	descrption="Una plantilla de inicio para usar el paquete thirdweb en una aplicación React Native"
	href="https://github.com/thirdweb-dev/expo-starter"
/>

### Instalación Manual

Para instalar manualmente el SDK de React Native, necesitarás instalar el paquete `@thirdweb/react-native-adapter` desde npm, además del paquete `thirdweb`.

<Steps>
<Step title="Instalar los paquetes">

Usando tu administrador de paquetes favorito o expo, instala todas las dependencias requeridas.

```shell
npx expo install thirdweb @thirdweb-dev/react-native-adapter
```

Dado que React Native requiere la instalación directa de dependencias nativas, también deberás instalar estas dependencias de pares requeridas:

```shell
npx expo install react-native-get-random-values @react-native-community/netinfo expo-application @react-native-async-storage/async-storage expo-web-browser expo-linking react-native-aes-gcm-crypto react-native-quick-crypto amazon-cognito-identity-js @coinbase/wallet-mobile-sdk react-native-mmkv react-native-svg @walletconnect/react-native-compat react-native-passkey
```

Aquí tienes una explicación de cada dependencia de pares y por qué es necesaria:

```ts
// Necesario para wallet connect
react-native-get-random-values
@react-native-community/netinfo
expo-application

// Necesario para wallet connect + billetera en la aplicación
@react-native-async-storage/async-storage

// Necesario para billetera en la aplicación
expo-web-browser // para flujos oauth
amazon-cognito-identity-js // para autenticación
react-native-aes-gcm-crypto // para cifrado
react-native-quick-crypto@0.7.0-rc.6 // para hashing rápido

// Necesario para Coinbase Wallet
@coinbase/wallet-mobile-sdk
react-native-mmkv

// Necesario para componentes de UI
react-native-svg
```

</Step>
<Step title="Edit your `metro.config.js`">

Si aún no tienes un archivo `metro.config.file.js` en tu proyecto, puedes crear uno ejecutando:

```shell
npx expo customize metro.config.js
```

Luego, necesitas agregar 2 propiedades al resolver de Metro: `unstable_enablePackageExports` y `unstable_conditionNames`. Esto es para indicar a Metro que resuelva correctamente los `exports` con nombre.

```js
// file: metro.config.js

// Learn more https://docs.expo.io/guides/customizing-metro
const { getDefaultConfig } = require("expo/metro-config");

/** @type {import('expo/metro-config').MetroConfig} */
const config = getDefaultConfig(__dirname);

// ADD THESE 2 PROPERTIES
config.resolver.unstable_enablePackageExports = true;
config.resolver.unstable_conditionNames = [
	"react-native",
	"browser",
	"require",
];

module.exports = config;
```

</Step>
<Step title="Import `@thirdweb-dev/react-native-adapter`">

### Sin `expo-router`

Simplemente importa el paquete en el punto de entrada de tu aplicación antes de cualquier otro import. Esto llenará de forma automática todas las funcionalidades necesarias.

```js
// file: App.tsx

// this needs to be imported before anything else
import "@thirdweb-dev/react-native-adapter";
// ... the rest of your app
```
### Con `expo-router`

Si estás utilizando `expo-router`, necesitas llenar automáticamente las funcionalidades antes de la entrada del enrutador:

#### 1. Crear un archivo `index.js`

Crea un archivo `index.js` en la raíz del repositorio. Este será el nuevo punto de entrada de tu aplicación, asegurando que las funcionalidades se llenen antes de cualquier enrutamiento.

```ts
// file: index.js

// this needs to be imported before expo-router
import "@thirdweb-dev/react-native-adapter";
import "expo-router/entry";
```

#### 2. Cambia tu punto de entrada principal en `package.json`

Ahora puedes reemplazar `expo-router/entry` con `./index.js` como tu punto de entrada principal.

```ts
// file: package.json

"main": "./index.js",
```

<Callout variant="info" title="Notas adicionales">

1. `react-native-aes-gcm-crypto` requiere `minSDK 26` para Android, puedes editar esto en tu archivo `app.json`.
2. Recibirás algunas advertencias sobre exportaciones no resueltas, esto es normal y mejorará a medida que las bibliotecas se actualicen.

</Callout>

</Step>

<Step title="Ejecutar la compilación de desarrollo">

Puedes ejecutar la compilación de desarrollo utilizando Expo CLI, ten en cuenta que esto debe usar la opción de 'compilación de desarrollo' y no Expo Go.

<Callout variant="info" title="Expo Go">

Debido a los conflictos entre el envoltorio de Expo Go y el de thirdweb, **Expo Go no es compatible actualmente**. Cuando ejecutes tu app, asegúrate de ejecutar una compilación de desarrollo normal sin usar Expo Go.

Si Expo CLI dice "Usando Expo Go" cuando inicies la app, presiona `s` para cambiar a la compilación de desarrollo.

<img src="https://i.ibb.co/JxyZzLn/Screenshot-2024-06-24-at-12-38-57-PM.png" width={300} />

</Callout>

Precompila la app (solo necesario una vez):

```shell
npx expo prebuild
```

Para ejecutar la compilación de desarrollo en iOS, utiliza el siguiente comando:

```shell
npx expo run:ios
```

Para ejecutar la compilación de desarrollo en Android, utiliza el siguiente comando:

```shell
npx expo run:android
```

</Step>

<Step title="Usar el paquete `thirdweb` normalmente">

Una vez que toda la configuración anterior esté lista, podrás usar la mayor parte de la funcionalidad del paquete `thirdweb` de forma predeterminada, sin necesidad de escribir código específico para React Native.

Esto significa que puedes seguir toda la documentación de React y esperar que todo funcione de la misma manera.

Ejemplos:

```tsx
// import thirdweb hooks, extensions, provider and wallets as usual
import { ThirdwebProvider } from "thirdweb/react";
import { balanceOf, claimTo } from "thirdweb/extensions/erc721";
import { inAppWallet } from "thirdweb/wallets/in-app";
```

</Step>
</Steps>



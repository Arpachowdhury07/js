import { createMetadata } from "@doc";

# ¿Qué es una Cuenta Inteligente?

export const metadata = createMetadata({
	image: {
		title: "Cómo funcionan las Cuentas Inteligentes",
		icon: "wallets",
	},
	title: "¿Qué es una Cuenta Inteligente? | thirdweb",
	description:
		"Una Cuenta Inteligente es una billetera controlada por un contrato inteligente que sigue la especificación ERC-4337",
});

Una Cuenta Inteligente es una billetera de contrato inteligente que sigue la [especificación ERC-4337](https://eips.ethereum.org/EIPS/eip-4337).

Ethereum tiene 2 tipos de cuentas para transferir y recibir tokens: EOAs (Cuentas Externamente Controladas) y Cuentas de Contrato. Una Cuenta Inteligente es una billetera administrada por una cuenta de contrato en lugar de una EOA. Una Cuenta Inteligente es un tipo de billetera que **no requiere claves privadas ni frases semilla**. Las cuentas inteligentes dependen del código en lugar de claves privadas para asegurar y recuperar la información de la billetera.

**Una Cuenta Inteligente es un tipo de billetera Web3 impulsada por contratos inteligentes.**

Esta cuenta inteligente se desbloquea con una 'clave' - una cuenta personal. Esta clave puede ser cualquier cosa, desde una billetera [MetaMask](/references/wallets/v2/MetaMaskWallet) o incluso una [Billetera Integrada](/connect/in-app-wallet/overview), y se utiliza como una forma de 'iniciar sesión' en la billetera.

## Beneficios de las Cuentas Inteligentes

1. Eficiencia de transacciones optimizada y transacciones en lotes
   - Combina varias transacciones en una sola transacción atómica
2. Mejora de Características de Seguridad
3. Recuperación Social y Multi-Sig
   - Recupera una billetera sin frases semilla/contraseñas
   - Nombra una persona de confianza para recuperar tu billetera en caso de emergencia
4. Programabilidad
   - Las cuentas inteligentes se pueden programar para hacer cualquier cosa que pueda hacer un contrato inteligente
   - Las cuentas inteligentes se pueden actualizar para agregar nuevas funcionalidades

## Fábricas de Cuentas

Para emitir cuentas inteligentes a los usuarios, se debe utilizar un contrato de fábrica de cuentas. Este contrato de fábrica es responsable de implementar contratos individuales para los usuarios cuando sea necesario. El SDK proporciona una fábrica global lista para usar, pero también puedes implementar tu propia fábrica.

## Terminología

### Billetera/Clave Personal

Esta es el administrador predeterminado en una cuenta o la "clave" de una cuenta. Puede ser cualquier billetera y se usa para inicializar la cuenta. Solo una billetera puede ser la "clave" de una cuenta por cada contrato de fábrica.

Esta billetera es la principal forma de acceder e interactuar con la cuenta.

### Cuenta

La cuenta es el contrato inteligente compatible con ERC-4337 que contiene todos los activos.

### Operaciones de Usuario (UserOperations)

Esta es la estructura de datos para la "pseudo-transacción" que el usuario desea realizar. La transacción es pseudo porque las Cuentas Inteligentes no pueden iniciar transacciones en cadenas EVM ya que no son compatibles de forma nativa. Contiene los siguientes campos:

- `sender`: La cuenta que realiza la operación.
- `nonce`: Parámetro anti-repetición; también se usa como la sal para la creación de cuentas por primera vez.
- `initCode`: El código de inicialización necesario para crear la cuenta (necesario si y solo si la cuenta aún no está en la cadena).
- `callData`: Los datos que se pasan al `sender` durante la operación.
- `callGasLimit`: La cantidad de gas a asignar para la operación.
- `verificationGasLimit`: La cantidad de gas a asignar para la etapa de verificación.
- `preVerificationGas`: La cantidad de gas a pagar para compensar al agregador por la ejecución de pre-verificación y los datos de llamada.
- `maxFeePerGas`: Tarifa máxima por gas (similar a [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559) `max_fee_per_gas`).
- `maxPriorityFeePerGas`: Tarifa máxima por prioridad por gas (similar a [EIP-1559](https://eips.ethereum.org/EIPS/eip-1559)).
- `paymasterAndData`: Dirección del patrocinador de la transacción, seguida de los datos adicionales a enviar al patrocinador (vacío para transacciones auto-patrocinadas).
- `signature`: Datos pasados a la cuenta junto con el nonce durante la etapa de verificación. Debe depender del `chainid` y la dirección del `EntryPoint` para evitar ataques de repetición.

### Punto de Entrada (EntryPoint)

El Punto de Entrada es un contrato singleton (un contrato que tiene una dirección predecible que es la misma en cada cadena). Tiene dos métodos que se utilizan como puntos de entrada para ejecutar lotes de Operaciones de Usuario: `handleOps` y `handleAggregatedOps`.

### Agrupador (Bundler)

Un agrupador es un nodo que monitorea el mempool alternativo de `UserOperations` y agrupa varias `UserOps` para enviarlas al contrato EntryPoint como una única transacción. Estas `UserOps` pueden ser enviadas desde diferentes cuentas y son agrupadas y enviadas al contrato `EntryPoint` a través de una llamada a `handleOps`.

El agrupador está controlado por su propia EOA que inicialmente paga las tarifas de gas por adelantado y luego es reembolsado por el remitente o un patrocinador si la transacción es patrocinada.

El contrato de punto de entrada luego usa las funciones `validateOp` y `executeOp` en el contrato de cuenta inteligente para verificar y ejecutar las `UserOps` en nombre de los usuarios.

Esto permite enviar transacciones con cuentas inteligentes.

### Patrocinador (Paymaster)

Un patrocinador es un contrato inteligente que retransmite transacciones. Proporciona un servicio que permite a un tercero pagar la tarifa de la transacción en nombre del usuario financiando el contrato del Patrocinador por adelantado. El patrocinador actúa como una reserva de gas que luego puede ser utilizada durante la ejecución de la llamada a través del contrato `EntryPoint`. El patrocinador de [abstracción de cuentas](/connect/account-abstraction) de thirdweb inicialmente es pagado por thirdweb. Utilizando una clave API, se rastrea y factura el uso. Puedes definir fácilmente [reglas de patrocinio](/connect/account-abstraction/sponsorship-rules) que determinen si una transacción será patrocinada.

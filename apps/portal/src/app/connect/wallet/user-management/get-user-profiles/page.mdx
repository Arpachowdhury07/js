import { createMetadata, ArticleIconCard } from "@doc";
import {
    ReactIcon,
    TypeScriptIcon,
    UnityIcon,
    DotNetIcon,
    ExternalLinkIcon,
    UnrealEngineIcon
} from "@/icons"

export const metadata = createMetadata({
	image: {
		title: "Getting User Profiles",
		icon: "wallets",
	},
	title: "Getting User Profiles | thirdweb",
	description:
		"Learn how to retrieve the user profiles linked to a wallet.",
});

# Obtención de Perfiles de Usuario

Una vez autenticado, puedes recuperar los perfiles de usuario vinculados a una billetera. Esto te permite acceder a información adicional sobre el usuario, como su dirección de correo electrónico o número de teléfono.

## Lista de Estrategias

Independientemente de la plataforma, la respuesta tendrá un objeto JSON con la siguiente estructura en algún nivel:


```json
{
	"strategy": "email",
	"details": {
		"email": "user@example.com"
	},
}
```

Ten en cuenta que el campo `email` mencionado anteriormente variará según el tipo de perfil. A continuación, enumeramos el campo esperado en nuestra lista de estrategias.


| Strategy      | Type              | `details` Field |
| ------------- | ----------------- | --------------- |
| Email         | `"email"`         | `email`         |
| Google        | `"google"`        | `email`         |
| Discord       | `"discord"`       | `email` | `id`  |
| Apple         | `"apple"`         | `email` | `id`  |
| Facebook      | `"facebook"`      | `email` | `id`  |
| Phone         | `"phone"`         | `phone`         |
| Guest         | `"guest"`         | `id`            |
| Passkey       | `"passkey"`       | `id`            |
| Telegram      | `"telegram"`      | `id`            |
| Farcaster     | `"farcaster"`     | `id`            |
| Line          | `"line"`          | `id`            |
| JWT           | `"jwt"`           | `id`            |
| Auth Endpoint | `"auth_endpoint"` | `id`            |
| Wallet        | `"wallet"`        | `address`       |



## Frontend

Para el frontend, ofrecemos métodos para obtener información sobre el usuario que ha iniciado sesión actualmente.

### In App Wallet

<div className="my-4 grid gap-2 md:grid-cols-2 lg:grid-cols-3">
    <ArticleIconCard
        title="TypeScript"
        icon={TypeScriptIcon}
        href="/typescript/v5/getProfiles"
    />
    <ArticleIconCard
        title="React"
        icon={ReactIcon}
        href="/react/v5/useProfiles"
    />
    <ArticleIconCard
        title="React Native"
        icon={ReactIcon}
        href="/react-native/v5/useProfiles"
    />
	<ArticleIconCard
        title=".NET"
        icon={DotNetIcon}
        href="/dotnet/wallets/providers/in-app-wallet#getting-linked-accounts"
    />
    <ArticleIconCard
        title="Unity"
        icon={UnityIcon}
        href="/unity/v5/wallets/in-app-wallet#account-linking"
    />
</div>

### Ecosystem Wallet

<div className="my-4 grid gap-2 md:grid-cols-2 lg:grid-cols-3">
     <ArticleIconCard
        title="TypeScript"
        icon={TypeScriptIcon}
        href="/typescript/v5/getProfiles"
    />
    <ArticleIconCard
        title="React"
        icon={ReactIcon}
        href="/react/v5/useProfiles"
    />
    <ArticleIconCard
        title="React Native"
        icon={ReactIcon}
        href="/react-native/v5/useProfiles"
    />
	<ArticleIconCard
        title=".NET"
        icon={DotNetIcon}
        href="/dotnet/wallets/providers/ecosystem-wallet#getting-linked-accounts"
    />
    <ArticleIconCard
        title="Unity"
        icon={UnityIcon}
        href="/unity/v5/wallets/ecosystem-wallet#account-linking"
    />
</div>


## Backend 


Desde el backend, puedes obtener los detalles de cualquier usuario dentro de tu billetera in-app o de ecosistema.

Para obtener los detalles del usuario, puedes hacer una solicitud `GET` al siguiente endpoint:

```
https://in-app-wallet.thirdweb.com/api/2023-11-30/embedded-wallet/user-details
```

### Parámetros de Consulta

Puedes especificar el parámetro de consulta `queryBy` para buscar por diferentes identificadores de usuario:

- `queryBy`: El parámetro para buscar. Puede ser uno de los siguientes: `walletAddress`, `email`, `phone`, `externalWalletAddress` o `id`.

Luego, puedes especificar el valor por el cual buscar, coincidiendo con el parámetro `queryBy`:

- `walletAddress`: La dirección de billetera que thirdweb ha generado para el usuario.
- `email`: La dirección de correo electrónico del usuario.
- `phone`: El número de teléfono del usuario.
- `externalWalletAddress`: La dirección de billetera externa que el usuario utilizó para iniciar sesión mediante SIWE.
- `id`: El ID del usuario (para autenticación personalizada).

### Autenticación

Debes incluir tu Client Secret de thirdweb en el encabezado de autorización.

Si eres el propietario de un ecosistema, debes incluir el encabezado `x-ecosystem-id` y, opcionalmente, el encabezado `x-ecosystem-partner-id` si el ecosistema está configurado solo para socios.

### Ejemplo de Comando curl

Aquí tienes un ejemplo de comando curl para obtener detalles del usuario por correo electrónico:

```bash
curl -X GET 'https://in-app-wallet.thirdweb.com/api/2023-11-30/embedded-wallet/user-details?queryBy=email&email=user@example.com' \
  -H 'x-secret-key: YOUR_THIRD_WEB_CLIENT_SECRET'
```

Aquí tienes un ejemplo de comando curl para obtener los detalles del usuario por dirección:

```bash
curl -X GET 'https://in-app-wallet.thirdweb.com/api/2023-11-30/embedded-wallet/user-details?queryBy=walletAddress&walletAddress=0x123456789abcdef' \
  -H 'x-secret-key: YOUR_THIRD_WEB_CLIENT_SECRET'
```

Aquí tienes un ejemplo de comando curl para obtener los detalles del usuario como propietario de un ecosistema:

```bash
curl -X GET 'https://in-app-wallet.thirdweb.com/api/2023-11-30/embedded-wallet/user-details?queryBy=walletAddress&walletAddress=0x123456789abcdef' \
  -H 'x-secret-key: YOUR_THIRD_WEB_CLIENT_SECRET' \
  -H 'x-ecosystem-id: ecosystem.YOUR_ECOSYSTEM_ID' \
  -H 'x-ecosystem-partner-id: YOUR_PARTNER_ID'
```

En ambos ejemplos, reemplaza `YOUR_THIRD_WEB_CLIENT_SECRET` con tu Client Secret real de thirdweb.

Reemplaza `YOUR_ECOSYSTEM_ID` y `YOUR_PARTNER_ID` con tu ID de ecosistema y ID de socio respectivamente. El ID de socio puede ser uno que configures para ti mismo como propietario del ecosistema.

### Formato de Respuesta

La API devuelve un array JSON con la siguiente estructura para cada usuario:

```json
[
  {
    "userId": "string",
    "walletAddress": "string",
    "email": "string (optional)",
    "phone": "string (optional)",
    "createdAt": "string",
    "linkedAccounts": [
      {
        "type": "string",
        "details": {
          "phone": "string",
          // or
          "email": "string",
          // or
          "address": "string",
          // or
          "id": "string",
          // Additional key-value pairs may be present
        }
      }
    ]
  }
]
```

Nota: El objeto `details` en `linkedAccounts` contendrá diferentes campos según el tipo de cuenta. Consulta la [lista de Estrategias](#list-of-strategies) arriba para obtener más información.

Recuerda manejar la respuesta de manera adecuada en el lenguaje de programación que elijas, incluyendo los casos de error y el análisis de la respuesta JSON.

### Métodos Convenientes

Si estás utilizando el SDK de thirdweb, puedes usar el método `getUser` para obtener los detalles del usuario.

 <ArticleIconCard
	title="getUser"
	icon={TypeScriptIcon}
	description="Obtén los detalles del usuario desde tu backend para billeteras thirdweb en TypeScript"
	href="/references/typescript/v5/getUser"
/>


## Vinculación de Identidades Adicionales

Si deseas vincular identidades adicionales a una billetera, consulta [Vinculación de Múltiples Identidades](/connect/wallet/user-management/link-multiple-identity).
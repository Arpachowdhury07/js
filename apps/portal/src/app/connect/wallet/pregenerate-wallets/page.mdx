import { Callout } from "@doc";
import { createMetadata, ArticleIconCard } from "@doc";

export const metadata = createMetadata({
	image: {
		title: "Pregenerar Billeteras",
		icon: "wallets",
	},
	title: "Pregenerar Billeteras | thirdweb",
	description: "Aprende cómo pregenerar billeteras para mejorar la incorporación de usuarios",
});

# Pregenerar Billeteras

## ¿Qué es la Pregeneración de Billeteras?

La pregeneración de billeteras es una técnica en la que se crean billeteras para los usuarios antes de que realmente se registren o autentiquen. Esto te permite:

1. Preasignar billeteras a los usuarios antes de que se registren
2. Reducir el tiempo que los usuarios pasan esperando durante el proceso de incorporación
3. Pre-financiar las billeteras con tokens o NFTs antes de que los usuarios las reclamen
4. Crear experiencias de usuario más fluidas para juegos y otras aplicaciones

## ¿Por qué Usar la Pregeneración de Billeteras?

### Capacidad de Pre-financiamiento
Puedes distribuir activos a las billeteras antes de que los usuarios las reclamen, permitiendo:
- Activos de juego pre-cargados
- Tokens de bienvenida
- NFTs promocionales
- Airdrops

### Mejor Experiencia de Usuario
- Los usuarios no tienen que esperar a que se cree la billetera durante el registro
- Se reduce la creación fallida de billeteras debido a problemas de red

Para pregenerar una billetera in-app o de ecosistema, puedes hacer una solicitud `POST` al siguiente endpoint:

```
https://in-app-wallet.thirdweb.com/api/v1/pregenerate
```

## Cuerpo de la Solicitud

El cuerpo de la solicitud debe ser un objeto JSON con los siguientes parámetros:

- `strategy`: La estrategia para la generación de la billetera
- `email` o `phone` o `userId`: El identificador del usuario asociado con la billetera a generar

### Billeteras basadas en correo electrónico

```
{ strategy: "email", email: "user@example.com" }
```

Cuando el usuario inicia sesión con cualquier método asociado con ese correo electrónico (incluyendo Google, Facebook, Discord auth), obtendrá acceso a la misma billetera pregenerada.

### Billeteras basadas en teléfono

```
{ strategy: "phone", phone: "+1321123321" }
```

### Billeteras basadas en ID de usuario personalizado

```
{ strategy: "custom_auth_endpoint", userId: "some_user_id" }
```

{/* TODO: update link when custom auth documentation has been updated */}
Usa esto cuando [implementes tu propio método de autenticación](/connect/in-app-wallet/custom-auth/configuration). Cuando el usuario inicie sesión, si los IDs de usuario que proporcionas desde el endpoint de autenticación coinciden, obtendrán acceso a la misma billetera pregenerada.

## Encabezados

Necesitas incluir los siguientes encabezados:

- `Content-Type`: Debe establecerse en `application/json`
- `x-secret-key`: Tu clave secreta para la autenticación
- `x-ecosystem-id` (opcional): Tu ID de ecosistema
- `x-ecosystem-partner-id` (opcional): Tu ID de socio del ecosistema

## Comando curl de Ejemplo

Aquí hay un ejemplo de comando curl para pregenerar una billetera thirdweb para el usuario `user@example.com`:

```bash
curl -X POST 'https://embedded-wallet.thirdweb.com/api/v1/pregenerate' \
  -H 'x-ecosystem-id: ecosystem.example-eco-123' \
  -H 'x-ecosystem-partner-id: 1415d24e-c7b0-4fce-846e-740841ef2c32' \
  -H 'x-secret-key: 9f8e7d6c5b4a3f2e1d0c9b8a7ffge434b2a1f0e9d8c7b6a5f4e3d2c1b0a9f8e7' \
  -H 'Content-Type: application/json' \
  -d '{
    "strategy": "email",
    "email": "user@example.com"
  }'
```

Reemplaza los valores de los encabezados con tu ID de cliente, ID de ecosistema y clave secreta reales.

<Callout variant='info' title='Pregeneración para ecosistemas'>
Para las billeteras de ecosistema, la clave secreta debe ser del mismo titular de la cuenta que el propietario del ecosistema. Si esto es un problema, por favor contáctanos.
</Callout>

## Formato de la Respuesta

Una llamada exitosa a la API devuelve un objeto JSON en el siguiente formato:

```json
{
  "wallet": {
      "address": "string",
      "createdAt": "string",
  }
}
```

<Callout variant='warning' title='Dirección de Billetera Inteligente'>
Usa [`predictSmartAccountAddress`](/references/typescript/v5/predictSmartAccountAddress) para generar la dirección correspondiente de la billetera inteligente.
El campo `address` siempre corresponde a la dirección EOA que ha sido pre-generada.
</Callout>


## ¿Qué Sigue?

La pregeneración es independiente y no cambia la experiencia del usuario.

Tus usuarios pueden continuar iniciando sesión como de costumbre. Cuando lo hagan, se les asignará la billetera pregenerada.

Para más información sobre el inicio de sesión, consulta [Iniciar Sesión](/connect/wallet/sign-in-methods/configure).
import { DocImage, Callout, createMetadata } from "@doc";
import EnclaveWalletCreation from "./assets/enclave-wallet-creation.png";
import AppScoped from "./assets/app-scoped.svg";
import EcosystemScoped from "./assets/ecosystem-scoped.svg";

export const metadata = createMetadata({
	image: {
		title: "In App wallet and Ecosystem Security",
		icon: "wallets",
	},
	title: "thirdweb Wallet Security",
	description:
		"Learn how thirdweb protects your user's private keys across applications using nitro Enclaves",
});

# Seguridad de la Billetera thirdweb

Si está buscando la documentación de seguridad anterior sobre el modelo de intercambio secreto shamir, consulte la página [In-App Wallet Security](/connect/wallet/security/legacy).

## Creación del billetera (Wallet)

Cuando un usuario inicia sesión en una aplicación utilizando su correo electrónico o redes sociales por primera vez, se genera una billetera dentro de un enclave seguro en el servidor después de verificar la legitimidad del usuario. El enclave proporciona un entorno de ejecución confiable, asegurándose de que el proceso de creación de la billetera esté aislado y protegido de interferencias externas.

- La billetera y su correspondiente clave privada se generan enteramente dentro del enclave, nunca dejando sus confines seguros.
- Los datos de autenticación de usuario se verifican dentro del enclave, asegurando que solo los usuarios legítimos y autenticados pueden iniciar la creación de la billetera.

<DocImage src={EnclaveWalletCreation} className="max-w-96" />

## Medidas de seguridad

- Las propiedades criptográficas del enclave aseguran que ni siquiera los operadores del servidor puedan acceder a los contenidos ni a las operaciones dentro del enclave.
- El enclave proporciona un hash verificable de la imagen del código que se ejecuta en el dispositivo, permitiendo que cualquiera verifique el contenido del código.
- La clave privada de la billetera nunca existe en una forma sin encriptar fuera del enclave.
- Todas las operaciones sensibles, como la firma de transacciones, se producen dentro del enclave, garantizando la seguridad de la billetera.

## Uso de la billetera

### Uso General

- Cuando los usuarios interactúan con su billetera a través del enclave, todas las comunicaciones se encripta y sólo el usuario legítimo puede acceder a su cartera.
- Todo el tráfico se encripta con TLS y HSTS. Los servicios se ejecutan en VPCs privadas sobre AWS y sólo se pueden acceder desde un único punto de entrada a través de nuestro DNS Cloudflare.
- Las aplicaciones pueden [link multiple authentication methods](/connect/in-app-wallet/guides/link-multiple-profiles) a la misma billetera. Cualquiera de estos métodos puede ser utilizado para autenticarse en la billetera de usuarios.

### Uso Ecosistema

Las billeteras de ecosistema están controladas por el propietario del ecosistema. Los propietarios del ecosistema pueden especificar políticas de uso para sus socios y desarrolladores que restringen lo que pueden hacer con la billetera. A diferencia del modelo de compartición secreta shamir, el modelo de billetera enclave asegura que la clave privada nunca se reconstruya en el cliente. Esto asegura que nadie pueda extraer la clave privada del cliente, incluyendo a otros desarrolladores del ecosistema. Además, significa también que los socios y desarrolladores deben presentar la solicitud al enclave que podría verificar la solicitud y bloquear las solicitudes que están fuera de alcance o rechazadas por el propietario del ecosistema.  

## Ámbitos

### Billetera In-App

Las billeteras In-App están limitadas a aplicaciones por ID de Cliente. Si los usuarios utilizan el mismo correo electrónico para iniciar sesión en una aplicación diferente usando Wallets In-App, la aplicación gestionará una cartera totalmente diferente.

#### Beneficios de las billeteras limitadas a una sola aplicación

- Cada aplicación tiene acceso limitado únicamente a las billeteras creadas a través de su propia aplicación. No puede administrar carteras de otras aplicaciones.
- Los usuarios sólo pueden ver tokens enviados o comprados desde tu aplicación.
- Para mejorar la experiencia del usuario, los métodos de pago guardados y la verificación KYC solo se proporcionan a thirdweb; las aplicaciones no pueden ver esta información.

<DocImage src={AppScoped} />

### Billetera de Ecosistema

Las billeteras de ecosistema están cubiertas por el ecosistema. Si los usuarios utilizan el mismo correo electrónico para iniciar sesión en una aplicación diferente usando el mismo ecosistema, obtendrán la misma billetera.

#### Beneficios de billeteras de ecosistema

- Las aplicaciones ahora pueden compartir los activos en varias aplicaciones. Esto es útil si eres una marca con múltiples aplicaciones y quieres que tus socios se aprovechen de los efectos de la red.
- El propietario de la aplicación tiene control total sobre lo que sucede dentro de cada aplicación. Esto es útil si usted es una marca que quiere asegurar que todas las aplicaciones en su ecosistema sigan las mismas reglas.

<DocImage src={EcosystemScoped} />

## Recuperación

- Los usuarios pueden exportar su clave privada en cualquier momento.

- Los usuarios pueden recuperar su billetera desde cualquier dispositivo autenticando o entrando en una aplicación para recibir acceso a su billetera.

- Las billeteras de thirdweb admiten cuatro categorías de autenticación: redes sociales, autenticación personalizada, billeteras externas y autenticación por correo electrónico / teléfono. Si un usuario pierde el acceso a su método de autenticación:

  1. **Para redes sociales y autenticación por correo electrónico / teléfono,** los usuarios pueden utilizar el flujo de recuperación de sus proveedores para recuperar el acceso a su cuenta.
  2. **En el caso de la autenticación personalizada,** el desarrollador que maneja su flujo de autenticación podrá restablecer la cuenta del usuario tras una verificación exitosa.
  3. Los proveedores de aplicaciones **no tienen acceso directo** a las cuentas de usuario ni a las claves privadas, ya que estas permanecen aseguradas dentro del enclave. El diseño del enclave asegura que solo las solicitudes de usuario verificadas puedan activar operaciones de billetera.

- Los usuarios pueden vincular sus métodos de autenticación, lo que les proporcionará múltiples formas de acceder a su cuenta si alguna vez pierden el acceso a cualquiera de sus métodos de autenticación.

## Seguridad y privacidad

### Cifrado TLS

Para aumentar la seguridad y la privacidad, las claves privadas o las "frases semilla" de la billetera nunca se almacenan ni se envían a través de una red. Se utiliza cifrado TLS en tránsito para las comunicaciones internas y externas con el backend de thirdweb y las bases de datos. El cifrado TLS también es requerido para los proveedores externos.

### AES-256

Las copias de seguridad y el almacenamiento de datos están cifrados con AES-256.

### GDPR y CCPA

thirdweb cumple con los marcos de cumplimiento de GDPR y CCPA y elimina los datos de los clientes bajo solicitud dentro del plazo requerido por cada norma (30 días para GDPR y 45 días para CCPA).

### Programa de Auditoría y Recompensas

Halborn ha auditado nuestra arquitectura de seguridad de billetera enclave, la cual lanzaremos próximamente, y hay un programa de recompensas en curso para asegurar que se detecten vulnerabilidades. [Ver la carta de atestación.](/pdfs/thirdweb_code_security_audit.pdf)

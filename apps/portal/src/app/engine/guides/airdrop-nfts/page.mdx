import { DocImage } from "@doc";
import OverviewImage from "../../assets/airdrop-overview.png";
import DemoImage1 from "../../assets/airdrop-nfts-1.png";
import DemoImage2 from "../../assets/airdrop-nfts-2.png";
import DemoImage3 from "../../assets/airdrop-nfts-3.png";
import DemoImage4 from "../../assets/airdrop-nfts-4.png";
import { createMetadata } from "@doc";

export const metadata = createMetadata({
	title: "Airdrop NFTs | thirdweb Engine",
	description:
		"Engine makes it effortless for any developer to airdrop NFTs at scale. You sponsor the gas so your users only need a wallet address!",
});

# Airdrop NFTs

Engine facilita que cualquier desarrollador realice airdrops de NFTs a gran escala. Tú patrocinas el gas para que tus usuarios solo necesiten una dirección de billetera.

<DocImage
	src={OverviewImage}
	alt="Vista general del airdrop"
	className="max-w-[600px] mx-auto"
/>

## Requisitos previos

- Una instancia de Engine
- Una [billetera backend](/engine/features/backend-wallets) con fondos para pagar el gas
- Un contrato NFT desplegado que pueda ser reclamado por la billetera backend
- Un ID de cliente y clave secreta desde la página de Configuración de tu Equipo > Proyecto > Configuración.

## Frontend: Agregar botones de Conectar Billetera y Reclamar

Usa [`<ConnectWallet>`](/react/latest/components/ConnectWallet) para pedir al usuario que conecte su billetera. El botón **Reclamar** llama a `POST /api/claim`.

```tsx
function ClaimPage() {
	const userWalletAddress = useAddress();

	const onClick = async () => {
		await fetch("/api/claim", {
			method: "POST",
			body: JSON.stringify({ userWalletAddress }),
		});
		alert(`🎉 A reward has been sent to your wallet: ${userWalletAddress}`);
	};

	return (
		<main>
			<h2>Thank you for being a superfan! ❤️</h2>
			<ConnectWallet />
			{userWalletAddress && <button onClick={onClick}>Claim my reward</button>}
		</main>
	);
}

function Example() {
	return (
		<ThirdwebProvider activeChain="<chain_id>" clientId="<thirdweb_client_id>">
			<ClaimPage />
		</ThirdwebProvider>
	);
}
```

_Replace `<thirdweb_client_id>`_.

## Backend: Llamar a Engine para acuñar un NFT

`POST /api/claim` llama a Engine para acuñar un NFT en la billetera del usuario.

```tsx
export async function POST(request: Request) {
	const { userWalletAddress } = await request.json();

	await fetch(
		"<engine_url>/contract/<chain_id>/<nft_contract_address>/erc1155/mint-to",
		{
			method: "POST",
			headers: {
				"Content-Type": "application/json",
				Authorization: "Bearer <thirdweb_secret_key>",
				"x-backend-wallet-address": "<backend_wallet_address>",
			},
			body: JSON.stringify({
				receiver: userWalletAddress,
				metadataWithSupply: {
					metadata: {
						name: "Acme Inc. Superfan",
						description: "Created with thirdweb Engine",
						image:
							"ipfs://QmciR3WLJsf2BgzTSjbG5zCxsrEQ8PqsHK7JWGWsDSNo46/nft.png",
					},
					supply: "1",
				},
			}),
		},
	);

	return NextResponse.json({ message: "Success!" });
}
```

## ¡Pruébalo!

Así es como se ve el flujo del usuario.

La aplicación solicita al usuario que conecte su billetera.

<DocImage src={DemoImage1} alt="Carga inicial de la página" />

<DocImage
	src={DemoImage2}
	alt="La aplicación solicita al usuario que conecte su billetera"
/>

Un usuario presiona reclamar.

<DocImage src={DemoImage3} alt="Un usuario presiona reclamar" />

¡Recibirán el NFT en su billetera en breve!

<DocImage
	src={DemoImage4}
	alt="¡Recibirán el NFT en su billetera en breve!"
/>

## Ejemplo completo de código

El código anterior está simplificado para mejorar su legibilidad. [Ver el código fuente completo &rarr;](https://github.com/thirdweb-example/engine-minting-api)
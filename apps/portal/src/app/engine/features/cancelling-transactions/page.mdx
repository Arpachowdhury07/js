import cancelTxImage from "../../assets/cancel-transaction-button.png";
import { createMetadata, DocImage } from "@doc";

export const metadata = createMetadata({
	title: "Cancelling Transactions | thirdweb Engine",
	description: "Cancel transactions in Engine to remove it from the queue.",
});

# Cancelando Transacciones

Engine envía transacciones a la blockchain dentro de los 5-10 segundos posteriores a recibir una solicitud. Durante picos de tráfico o gas, las transacciones pueden tardar más en ser minadas.

En algunos casos, tu aplicación puede querer cancelar la transacción, como por ejemplo:

- La transacción fue enviada por error.
- Se agotó el suministro de una colección de NFT.
- La tasa de cambio de la transacción ha cambiado y debe ser reintentada con una nueva tasa de cambio.

Cuando Engine recibe una solicitud de cancelación:

- Si la transacción se ha completado (minada, con error o cancelada), este endpoint devuelve un error.
- Si la transacción ya ha sido enviada a RPC, este endpoint envía una transacción no operativa con opciones de gas agresivas para "reemplazar" la transacción original.
- Si la transacción aún no ha sido enviada, este endpoint la eliminará de la cola.

**Cuando se cancela, la transacción no se volverá a intentar.** Tu backend puede reintentar esta transacción de forma segura.

## Cancelar una transacción desde la API

```typescript
// queueId fue devuelto desde una solicitud de escritura anterior.

const resp = await fetch("<engine_url>/transaction/cancel", {
	method: "POST",
	headers: {
		"Content-Type": "application/json",
		Authorization: "Bearer <access_token>",
	},
	body: JSON.stringify({ queueId }),
});
if (resp.status === 200) {
	console.log(`Transaction ${queueId} was canceled.`);
}
```

Referencia: [`Cancelar transacción`](https://thirdweb-engine.apidocumentation.com/reference#tag/transaction/POST/transaction/cancel)

## Cancelar una transacción desde el panel de control

Selecciona el ícono de **Cancelar** junto a una transacción en cola en la tabla de Transacciones.

<DocImage src={cancelTxImage} />

## Cancelar todas las transacciones en cola

Próximamente.


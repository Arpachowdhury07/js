import { Details, createMetadata } from "@doc";

export const metadata = createMetadata({
	title: "Contracts | thirdweb Engine",
	description:
		"Call or deploy contracts from your backend wallet to any EVM blockchain with one API call.",
});

# Contratos

Llama o despliega contratos desde tu billetera backend a cualquier blockchain EVM con una sola llamada a la API.

## Escribir en un contrato

> Esta solicitud requiere fondos de gas en la billetera backend.

```ts
const resp = await fetch(
	"<engine_url>/contract/<chain>/<contract_address>/write",
	{
		method: "POST",
		headers: {
			"Content-Type": "application/json",
			Authorization: "Bearer <access_token>",
			"x-backend-wallet-address": "<backend_wallet_address>",
		},
		body: JSON.stringify({
			functionName: "transferFrom",
			args: [
				"0x1946267d81Fb8aDeeEa28e6B98bcD446c8248473",
				"0x3EcDBF3B911d0e9052b64850693888b008e18373",
				"0",
			],
		}),
	},
);

const { result } = await resp.json();
// queueId is a reference to the transaction queued by Engine.
console.log("Queue ID:", result.queueId);
```

<Details id="handling-overloaded-functions" summary="Manejo de funciones sobrecargadas">

Si hay múltiples firmas para `functionName` en el contrato, proporciona la firma completa con los argumentos.

**Ejemplo**

Tu contrato tiene dos funciones llamadas `mintTo`:

```solidity
function mintTo(address to) public
```

```solidity
function mintTo(address to, uint256 quantity) public
```

Este es el cuerpo de la solicitud para llamar a la segunda función:

```json
{
	"functionName": "mintTo(address, uint256)",
	"args": ["0x4Ff9aa707AE1eAeb40E581DF2cf4e14AffcC553d", "3"]
}
```

</Details>

[See API reference](https://thirdweb-engine.apidocumentation.com/reference#tag/contract/POST/contract/{chain}/{contractAddress}/write)

### Llamar a un método pagadero

Para enviar tokens nativos a un método pagadero (por ejemplo, ETH en Ethereum), configura `txOverrides.value` en el cuerpo de la solicitud a `POST /contract/<chain>/<contract_address>/write`.

```json
{
  "functionName": "...",
  "args": [ ... ],
  "txOverrides": {
    "value": "1000000000000000", // 0.001 ETH in wei
  }
}
```

## Leer desde un contrato

```ts
const resp = await fetch(
	"<engine_url>/contract/<chain>/<contract_address>/read?functionName=balanceOf&args=0x3EcDBF3B911d0e9052b64850693888b008e18373",
	{
		headers: {
			Authorization: "Bearer <access_token>",
		},
	},
);

const { result } = await resp.json();
console.log("ERC-20 balance:", result);
```

## Desplegar un contrato

> Esta solicitud requiere fondos de gas en la billetera backend.

```ts
const resp = await fetch("<engine_url>/deploy/<chain>/prebuilts/nft-drop", {
	method: "POST",
	headers: {
		"Content-Type": "application/json",
		Authorization: "Bearer <access_token>",
		"x-backend-wallet-address": "<backend_wallet_address>",
	},
	body: JSON.stringify({
		contractMetadata: {
			name: "thirdweb Engine example",
			symbol: "eng",
			primary_sale_recipient: "0x3EcDBF3B911d0e9052b64850693888b008e18373",
		},
	}),
});

const { result } = await resp.json();
// queueId is a reference to the transaction queued by Engine.
console.log("Queue ID:", result.queueId);
```

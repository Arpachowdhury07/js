import { InstallTabs, Steps, Step, Callout } from "@doc";

# Primeros Pasos

En esta guía de inicio rápido, crearemos un script básico para generar una billetera usando una clave privada y enviar una transacción. Supondremos que ya tienes un proyecto en TypeScript creado.

<Steps>
<Step title="Instalar el SDK">

Para comenzar, instala el SDK de thirdweb usando tu gestor de paquetes preferido.

<InstallTabs npm="npm i thirdweb" yarn="yarn add thirdweb" pnpm="pnpm i thirdweb" bun="bun i thirdweb" />
</Step>

<Step title="Crear un cliente de thirdweb">

Obtén un client id desde [thirdweb](https://thirdweb.com/create-api-key) creando un nuevo proyecto y agrégalo a tu archivo `.env`.


```shell
THIRDWEB_SECRET_KEY=[YOUR SECRET KEY]
WALLET_PRIVATE_KEY=[YOUR WALLET PRIVATE KEY]
```

Crea un cliente de thirdweb en tu script.

```ts
import { createThirdwebClient } from "thirdweb"

const client = createThirdwebClient({
	// use `secretKey` for server side or script usage
	secretKey: process.env.THIRDWEB_SECRET_KEY
});
```

<Callout variant="warning" title="Client Id vs Secret Key">
	El Client Id se usa para **uso en el lado del cliente** y está restringido por las restricciones de dominio que configures en tu clave API. Es un identificador público que se puede utilizar de forma segura en el frontend.

    La Secret Key se usa para **uso en el lado del servidor o en scripts** y no está restringida por las restricciones de dominio. Nunca expongas tu Secret Key en el código del cliente.
</Callout>

</Step>

<Step title="Leer el estado del contrato">

Un cliente es todo lo que necesitas para comenzar a leer datos de la blockchain.

1. Importa las extensiones que deseas usar.
2. Define un contrato con `getContract` en una dirección y cadena específicas.
3. Llama a la función de la extensión para leer los datos.

```ts
import { getContract } from "thirdweb";
import { sepolia } from "thirdweb/chains";
// 1. Importar la extensión que deseas usar
import { getOwnedNFTs } from "thirdweb/extensions/erc1155";

// 2. Obtener el contrato
const contract = getContract({
    client,
    address: "0x1234...",
    chain: sepolia,
});

// 3. Llamar a la función de la extensión
const ownedNFTs = await getOwnedNFTs({
	contract,
	address: "0x1234...",
});

console.log(ownedNFTs);
```

</Step>

<Step title="Generar una billetera desde una clave privada">

Para realizar transacciones desde tu script, necesitarás una cuenta. Puedes generar una billetera a partir de una clave privada utilizando la función `privateKeyToAccount`.

```ts
import { privateKeyToAccount } from "thirdweb/wallets"

const account = privateKeyToAccount({
	client,
	privateKey: process.env.PRIVATE_KEY
});

// Obtener la dirección de la cuenta
const address = account.address;
console.log("Connected as", address);
```

</Step>

<Step title="Leer datos de la billetera">

Leamos el saldo de la cuenta que acabas de crear. Necesitarás fondos para realizar transacciones.

```ts
import { getWalletBalance } from "thirdweb/wallets";

// Obtener el saldo de la cuenta
const balance = await getWalletBalance({
	account,
	chain: sepolia,
});
console.log("Balance:", balance.displayValue, balance.symbol);
```

</Step>

<Step title="Enviar una transacción">

Con la cuenta creada y financiada, ahora puedes enviar una transacción.

1. Importa la extensión que deseas usar.
2. Define un contrato con `getContract` en una dirección y cadena específicas.
3. Llama a la función de la extensión para preparar la transacción.
4. Envía la transacción.


```ts
import { getContract, sendTransaction } from "thirdweb";
// 1. Importar la extensión que deseas usar
import { transfer } from "thirdweb/extensions/erc20";

// 2. Definir el contrato
const contract = getContract({
    client,
    address: "0x1234...",
    chain: sepolia,
});

// 3. Llamar a la función de la extensión para preparar la transacción
const transaction = transfer({
  contract,
  to: "0x1234...",
  amount: "0.01",
});

// 4. Enviar la transacción
const result = await sendTransaction({
  transaction,
  account,
});

console.log("Hash de la transacción:", result.transactionHash);
```

También puedes llamar funciones genéricas de contratos utilizando la función `prepareContractCall`, simplemente especificando la firma del método de Solidity que deseas llamar. Los argumentos se inferirán automáticamente según la firma del método.

```ts
import { getContract, prepareContractCall, sendTransaction } from "thirdweb";
import { sepolia } from "thirdweb/chains";
import { toWei } from "thirdweb/utils";

// 1. Definir el contrato
const contract = getContract({
    client,
    address: "0x1234...",
    chain: sepolia,
});

// 2. Preparar la transacción
const transaction = prepareContractCall({
  contract,
  // Especifica la firma del método que deseas llamar
  method: "function mintTo(address to, uint256 amount)",
  // Y los parámetros para ese método
  // Sus tipos se infieren automáticamente según la firma del método
  params: ["0x123...", toWei("100")],
});

// 3. Enviar la transacción
const result = await sendTransaction({
  transaction,
  account,
});

console.log("Transaction hash:", result.transactionHash);
```

</Step>
<Step title="Conclusión">

Ahora has aprendido los conceptos básicos sobre cómo usar el SDK de thirdweb para leer y escribir en la blockchain. Ahora puedes comenzar a construir tus propias aplicaciones y explorar todo el potencial del SDK.

[Consulta la referencia completa del SDK](/references/typescript/v5).

</Step>

</Steps>

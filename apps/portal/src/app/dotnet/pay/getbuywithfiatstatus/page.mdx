import { Details, createMetadata } from "@doc";

export const metadata = createMetadata({
	title: "GetBuyWithFiatStatus | thirdweb .NET SDK",
	description: "Obtener el estado de un intercambio para un hash de transacción.",
});

# GetBuyWithFiatStatus

Obtén el estado del onramp para un id de intención devuelto por [BuyWithFiat](/dotnet/pay/buywithfiat).

## Uso

```csharp
using Thirdweb.Pay;

var status = await ThirdwebPay.GetBuyWithFiatStatus(client, _quote.IntentId);
```

En algunos casos, es posible que realices una compra a través de un token intermedio que requiera un paso adicional. En estos casos, el estado `CRYPTO_SWAP_REQUIRED` indica que la transferencia del onramp se ha completado y ahora puedes usar el id de la intención para activar una transacción [BuyWithCrypto](/dotnet/pay/buywithcrypto) para llegar al token de destino. El flujo es el mismo para [GetBuyWithCryptoQuote](/dotnet/pay/getbuywithcryptoquote), aunque ahora puedes pasar el id de la intención como parámetro para vincular ambos estados.

<Details summary="Configuration">

#### Client (required)

`ThirdwebClient`: La instancia del cliente de Thirdweb.

#### Intent ID

`string`: El id de intención devuelto por la cotización.

</Details>

<Details summary="Return Value">

### Return Value

Un objeto `BuyWithFiatStatusResult` que contiene las siguientes propiedades:

```csharp
string IntentId; // Identificador de intención para rastrear el estado del flujo de onramp
string Status; // Estado del flujo de onramp
string ToAddress; // Dirección para recibir los tokens
OnRampQuote Quote; // Detalles de la cotización de OnRamp
TransactionDetails Source; // Detalles de la transacción de origen
TransactionDetails Destination; // Detalles de la transacción de destino
string FailureMessage; // Mensaje de error si lo hay
object PurchaseData; // Datos adicionales pasados al crear la cotización
```

</Details>

<Details summary="OnRamp Status">

### OnRamp Status

Posibles estados devueltos para las transacciones de onramp

```csharp
NONE - No status.  
PENDING_PAYMENT - Payment is pending.  
PAYMENT_FAILED - Payment has failed.  
PENDING_ON_RAMP_TRANSFER - Pending on-ramp transfer.  
ON_RAMP_TRANSFER_IN_PROGRESS - On-ramp transfer is in progress.  
ON_RAMP_TRANSFER_COMPLETED - On-ramp transfer is completed.  
ON_RAMP_TRANSFER_FAILED - On-ramp transfer has failed.  
CRYPTO_SWAP_REQUIRED - Crypto swap is required.  
CRYPTO_SWAP_COMPLETED - Crypto swap is completed.  
CRYPTO_SWAP_FALLBACK - Crypto swap fallback.  
CRYPTO_SWAP_IN_PROGRESS - Crypto swap is in progress.  
CRYPTO_SWAP_FAILED - Crypto swap has failed.
```

</Details>

import { Details, GithubButtonLink, createMetadata } from "@doc";

export const metadata = createMetadata({
	image: {
		title: "Contrato ContractMetadata",
		icon: "solidity",
	},
	title: "ContractMetadata | Contrato de thirdweb",
	description:
		"Esta extensión te permite definir metadatos para tu contrato inteligente. Además, ContractMetadata es necesario para habilitar regalías en contratos NFT en OpenSea.",
});


# ContractMetadata

```solidity
import "@thirdweb-dev/contracts/extension/ContractMetadata.sol";
```
El contrato inteligente `ContractMetadata` es una extensión utilizable con cualquier contrato inteligente. Te permite definir metadatos para tu contrato inteligente. Además, `ContractMetadata` es necesario para habilitar [regalías](/contracts/build/extensions/general/Royalty) en contratos NFT en OpenSea.

<GithubButtonLink href="https://github.com/thirdweb-dev/contracts/blob/main/contracts/extension/ContractMetadata.sol" />

## Uso

La extensión `ContractMetadata` es un _contrato abstracto_ y espera que implementes las siguientes funciones por ti mismo:

| Nombre                                                                                             | Tipo                    | Retorna | Descripción                                                                                                                             |
| ------------------------------------------------------------------------------------------------- | ----------------------- | ------- | --------------------------------------------------------------------------------------------------------------------------------------- |
| [`_canSetContractURI`](/contracts/build/extensions/general/ContractMetadata#_cansetcontracturi)  | internal view _virtual_ | `bool`  | Se ejecuta en cada intento de establecer los metadatos del contrato. Devuelve si los metadatos del contrato pueden establecerse en el contexto de ejecución dado. |

Este es un contrato inteligente de ejemplo que demuestra cómo heredar de esta extensión y sobrescribir las funciones para agregar (opcionalmente) funcionalidad personalizada.

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@thirdweb-dev/contracts/extension/ContractMetadata.sol";

contract MyContract is ContractMetadata {

    /**
     *  Almacenamos la dirección del desplegador del contrato solo para los fines del ejemplo
     *  en el comentario de código abajo.
     *
     *  Hacer esto no es necesario para usar la extensión `ContractMetadata`.
     */
    address public deployer;

    constructor() {
        deployer = msg.sender;
    }

    /**
     *  Esta función devuelve quién está autorizado para establecer los metadatos de tu contrato.
     *
     *  Como EJEMPLO, solo permitiremos que el desplegador del contrato establezca los metadatos del contrato.
     *
     *  DEBES completar el cuerpo de esta función para usar la extensión `ContractMetadata`.
     */
    function _canSetContractURI() internal view virtual override returns (bool){
        return msg.sender == deployer;
    }
}
```

## Contratos Base que Implementan Esta Extensión

Todos los contratos base implementan esta extensión.

## Referencia Completa de la API

<Details summary="contractURI">

```solidity
function contractURI() external view returns (string memory);
```

- Devuelve la URI para los metadatos asociados con el contrato inteligente. Generalmente, una URI de IPFS.
- Establece este valor usando la función `setContractURI`.

</Details>

<Details summary="setContractURI">

```solidity
function setContractURI(string calldata _uri) external;
```

- Establece los metadatos del contrato inteligente. Este valor se puede leer desde la función `contractURI`.
- Parámetro `_uri`: La URI de los metadatos para asociar con el contrato.
- La función `_canSetContractURI` se ejecuta en cada llamada a esta función. Si el valor devuelto de `_canSetContractURI` es `false`, la llamada a `setContractURI` se revertirá.

</Details>

<Details summary="_setupContractURI">

```solidity
function _setupContractURI(string memory _uri) internal;
```

- Establece los metadatos del contrato inteligente. Este valor se puede leer desde la función `contractURI`.
- Parámetro `_uri`: La URI de los metadatos para asociar con el contrato.
- La función `_canSetContractURI` _no_ se ejecuta en una llamada a esta función.

</Details>

<Details summary="_canSetContractURI">

```solidity
function _canSetContractURI() internal view virtual returns (bool);
```

- Se ejecuta en cada llamada a la función `setContractURI`.
- Devuelve si los metadatos del contrato pueden establecerse en el contexto de ejecución dado.
- Por ejemplo, esta función puede verificar si la billetera que llama a `setContractURI` es el propietario del contrato, y hacer cumplir que solo el propietario pueda llamar exitosamente a `setContractURI`.

</Details>

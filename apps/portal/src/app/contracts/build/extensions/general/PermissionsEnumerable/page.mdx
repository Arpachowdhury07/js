import { Details, GithubButtonLink, createMetadata } from "@doc";

export const metadata = createMetadata({
	image: {
		title: "Contrato PermissionsEnumerable",
		icon: "solidity",
	},
	title: "PermissionsEnumerable | Contrato de thirdweb",
	description:
		"La extensión PermissionsEnumerable proporciona control de acceso basado en roles: puedes crear roles y escribir lógica personalizada en tu contrato inteligente que dependa de si una billetera dada tiene un rol específico",
});

# PermissionsEnumerable

```solidity
import "@thirdweb-dev/contracts/extension/PermissionsEnumerable.sol";
```

La extensión `PermissionsEnumerable` proporciona control de acceso basado en roles: puedes crear roles y escribir lógica personalizada en tu contrato inteligente que dependa de si una billetera dada tiene un rol específico.
La parte `Enumerable` proporciona la capacidad de ver todas las direcciones que tienen un rol específico.

<GithubButtonLink href="https://github.com/thirdweb-dev/contracts/blob/main/contracts/extension/PermissionsEnumerable.sol" />

## Uso

Este es un contrato inteligente de ejemplo que demuestra cómo heredar de esta extensión y sobrescribir las funciones para agregar (opcionalmente) funcionalidad personalizada.

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@thirdweb-dev/contracts/extension/PermissionsEnumerable.sol";

contract MyContract is PermissionsEnumerable {
    // Any `bytes32` value is a valid role. You can create roles by defining them like this.
    bytes32 public constant NUMBER_ROLE = keccak256("NUMBER_ROLE");

    // See comments for `setNumber`, below.
    uint256 public number;

    /**
     *  El contrato `PermissionsEnumerable` pone a disposición un rol ya definido: el `DEFAULT_ADMIN_ROLE`.
     *
     *  Como EJEMPLO, otorgamos a quien despliegue el contrato este rol de administrador.
     */
    constructor() {
        _setupRole(DEFAULT_ADMIN_ROLE, msg.sender);
    }

    /**
     *  EJEMPLO: aquí tenemos una función que queremos restringir solo a los poseedores de `NUMBER_ROLE`.
     *
     *  Para lograr esto, usamos el modificador `onlyRole` proporcionado por `PermissionsEnumerable`, y
     *  le pasamos `NUMBER_ROLE` como argumento.
     */
    function setNumber(uint256 _newNumber) public onlyRole(NUMBER_ROLE) {
        number = _newNumber;
    }
}
```

## Contratos Base que Implementan Esta Extensión

Ninguno de los contratos base implementa esta extensión.

## Referencia Completa de la API

`PermissionsEnumerable` hereda de la extensión [`Permissions`](/contracts/build/extensions/general/Permissions#full-api-reference), por lo que incluye
todas las funciones de esa extensión. También incluye las siguientes funciones:

<Details summary="getRoleMember">

```solidity
function getRoleMember(bytes32 role, uint256 index) external view returns (address member);
```

- Devuelve una de las cuentas que tienen el rol `role`. `index` debe ser un valor entre 0 y el valor de `getRoleMemberCount` en ese momento, sin incluirlo.
- Parámetros:
  - `role`: hash keccak256 del rol. Ej. keccak256("TRANSFER_ROLE")
  - `index`: Índice en la lista de miembros actuales para el rol.

</Details>

<Details summary="getRoleMemberCount">

```solidity
function getRoleMemberCount(bytes32 role) external view returns (uint256 count);
```

- Devuelve el número de cuentas que tienen el rol `role`. Puede usarse junto con `getRoleMember` para enumerar todos los poseedores de un rol.
- Parámetros:
  - `role`: hash keccak256 del rol. Ej. keccak256("TRANSFER_ROLE")

</Details>

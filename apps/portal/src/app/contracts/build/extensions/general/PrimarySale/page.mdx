import { Details, GithubButtonLink, createMetadata } from "@doc";

export const metadata = createMetadata({
	image: { title: "Contrato PrimarySale", icon: "solidity" },
	title: "PrimarySale | Contrato de thirdweb",
	description:
		"PrimarySale te permite establecer un receptor para cualquier valor de venta que tengas la intención de recaudar en tu contrato inteligente",
});

# PrimarySale

```solidity
import "@thirdweb-dev/contracts/extension/PrimarySale.sol";
```

`PrimarySale` te permite establecer un receptor para cualquier valor de venta que tengas la intención de recaudar en tu contrato inteligente.

<GithubButtonLink href="https://github.com/thirdweb-dev/contracts/blob/main/contracts/extension/PrimarySale.sol" />

## Uso

La extensión `PrimarySale` es un _contrato abstracto_, y espera que implementes las siguientes funciones por ti mismo:

| Nombre                                                                                                         | Tipo                    | Devuelve | Descripción                                                                                                                     |
| -------------------------------------------------------------------------------------------------------------- | ----------------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------- |
| [`_canSetPrimarySaleRecipient`](/contracts/build/extensions/general/PrimarySale#_cansetprimarysalerecipient) | internal view _virtual_ | `bool`   | Se ejecuta en cada intento de establecer un nuevo receptor de venta primaria. Devuelve si esta información puede ser establecida en el contexto de ejecución dado. |

Este es un contrato inteligente de ejemplo que demuestra cómo heredar de esta extensión y sobrescribir las funciones para agregar (opcionalmente) funcionalidad personalizada.

```solidity
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.0;

import "@thirdweb-dev/contracts/extension/PrimarySale.sol";

contract MyContract is PrimarySale {
    /**
     *  Almacenamos la dirección del desplegador del contrato solo para los fines del ejemplo
     *  en el comentario de código a continuación.
     *
     *  Hacer esto no es necesario para usar la extensión `PrimarySale`.
     */
    address public deployer;

    constructor() {
        deployer = msg.sender;
    }

   /**
     *  Esta función devuelve quién está autorizado para establecer la dirección del receptor de la venta primaria para tu contrato.
     *
     *  Como EJEMPLO, solo permitiremos que el desplegador del contrato establezca la dirección del receptor de la venta primaria.
     *
     *  DEBES completar el cuerpo de esta función para usar la extensión `PrimarySale`.
     */
    function _canSetPrimarySaleRecipient()
        internal
        virtual
        override
        returns (bool)
    {
        return msg.sender == deployer;
    }
}
```

## Contratos Base que Implementan Esta Extensión

- [`ERC20Drop`](/contracts/build/extensions/erc-1155/ERC1155Claimable)
- [`ERC20DropVote`](/contracts/build/base-contracts/erc-20/drop-vote)
- [`ERC20SignatureMint`](/contracts/build/base-contracts/erc-20/signature-mint)
- [`ERC20SignatureMintVote`](/contracts/build/base-contracts/erc-20/signature-mint-vote)
- [`ERC721Drop`](/contracts/build/base-contracts/erc-721/drop)
- [`ERC721SignatureMint`](/contracts/build/base-contracts/erc-721/signature-mint)
- [`ERC1155Drop`](/contracts/build/base-contracts/erc-1155/drop)
- [`ERC1155SignatureMint`](/contracts/build/base-contracts/erc-1155/signature-mint)

## Referencia Completa de la API

<Details summary="primarySaleRecipient">

```solidity
function primarySaleRecipient() public view returns (address);
```

- Devuelve la dirección del receptor de la venta primaria almacenada en el contrato.
- Establece este valor usando la función `setPrimarySaleRecipient`.

</Details>

<Details summary="setPrimarySaleRecipient">

```solidity
function setPrimarySaleRecipient(address saleRecipient) external;
```

- Permite que una billetera autorizada establezca la dirección del receptor de la venta primaria.
- Parámetro `saleRecipient`: La dirección que se establecerá como el nuevo receptor de la venta primaria.
- La función `_canSetPrimarySaleRecipient` se ejecuta en cada llamada a esta función. Si el valor devuelto de `_canSetPrimarySaleRecipient` es `false`, la llamada a `setPrimarySaleRecipient` se revertirá.

</Details>

<Details summary="_setupPrimarySaleRecipient">

```solidity
function _setupPrimarySaleRecipient(address saleRecipient) internal;
```

- Establece el receptor de la venta primaria.
- Parámetro `saleRecipient`: La dirección que se establecerá como el nuevo receptor de la venta primaria.
- La función `_canSetPrimarySaleRecipient` _no_ se ejecuta en una llamada a esta función.

</Details>

<Details summary="_canSetPrimarySaleRecipient">

```solidity
function _canSetPrimarySaleRecipient() internal view virtual returns (bool);
```

- Se ejecuta en cada llamada a la función `setPrimarySaleRecipient`.
- Devuelve si se puede establecer un nuevo receptor de la venta primaria en el contexto de ejecución dado.
- Por ejemplo, esta función puede verificar si la billetera que llama a `setPrimarySaleRecipient` es el propietario del contrato, y hacer cumplir que solo el propietario actual pueda llamar exitosamente a `setPrimarySaleRecipient`.

</Details>

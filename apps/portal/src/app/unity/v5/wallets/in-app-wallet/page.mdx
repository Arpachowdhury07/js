import { Details, Callout, createMetadata, ArticleIconCard } from "@doc";
import { GraduationCap } from "lucide-react";

export const metadata = createMetadata({
	title: "InAppWallet | SDK de thirdweb para Unity",
	description:
		"Instancia un InAppWallet para firmar transacciones y mensajes.",
});

# InAppWallet

`InAppWallet` es la opción de proveedor de billetera persistente definitiva para tu juego. Soporta autenticación por correo electrónico, teléfono, redes sociales y esquemas personalizados de autenticación, y persistirá a través de dispositivos, plataformas y otros SDKs.

Es una excelente opción para un administrador/firmante de [SmartWallet](/unity/v5/wallets/account-abstraction) y asegurará que tus usuarios puedan tener la misma dirección de billetera en todos tus juegos, aplicaciones y cadenas de bloques.

## Métodos de Inicio de Sesión

Las billeteras In-App soportan una variedad de métodos de inicio de sesión:
- Correo Electrónico (Inicio de sesión OTP)
- Teléfono (Inicio de sesión OTP)
- Redes Sociales (Google, Apple, Facebook, Telegram, Farcaster, Line, Github, Twitch, Steam, etc.)
- SIWE (Inicio de sesión con Ethereum)
- Autenticación Personalizada (Compatible con OIDC)
- Autenticación Personalizada (Endpoint de Autenticación Genérico)
- Invitado (Facilita la incorporación, vincula otras cuentas más tarde)

### Inicio de sesión con Correo Electrónico

```csharp
var inAppWalletOptions = new InAppWalletOptions(email: "myepicemail@domain.id");
var options = new WalletOptions(
    provider: WalletProvider.InAppWallet, 
    chainId: 1, 
    inAppWalletOptions: inAppWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

Instanciará `InAppWalletModal` o reanudará la sesión: un prefab simple que verificará el OTP del usuario.

### Inicio de sesión con Teléfono

```csharp
var inAppWalletOptions = new InAppWalletOptions(phoneNumber: "+1234567890");
var options = new WalletOptions(
    provider: WalletProvider.InAppWallet, 
    chainId: 1, 
    inAppWalletOptions: inAppWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

Instanciará `InAppWalletModal` o reanudará la sesión: un prefab simple que verificará el OTP del usuario.

### Inicio de sesión con Redes Sociales (Google, Apple, Facebook, etc.)

```csharp
var inAppWalletOptions = new InAppWalletOptions(authprovider: AuthProvider.Google);
var options = new WalletOptions(
    provider: WalletProvider.InAppWallet, 
    chainId: 1, 
    inAppWalletOptions: inAppWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

Abrirá un navegador nativo o una sesión OAuth para autenticar al usuario y redirigirlo de vuelta al juego.

### Inicio de sesión con SIWE

```csharp
var inAppWalletOptions = new InAppWalletOptions(authprovider: AuthProvider.Siwe, siweSigner: anyExternalWallet);
var options = new WalletOptions(
    provider: WalletProvider.InAppWallet, 
    chainId: 1, 
    inAppWalletOptions: inAppWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

Usará la billetera externa para firmar un mensaje e iniciar sesión en la billetera InAppWallet.

### Inicio de sesión con Autenticación Personalizada - Compatible con OIDC

```csharp
var inAppWalletOptions = new InAppWalletOptions(authprovider: AuthProvider.JWT, jwtOrPayload: "myjwt", encryptionKey: "myencryptionkey");
var options = new WalletOptions(
    provider: WalletProvider.InAppWallet, 
    chainId: 1, 
    inAppWalletOptions: inAppWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

### Inicio de sesión con Autenticación Personalizada - Endpoint de Autenticación Genérico

```csharp
var inAppWalletOptions = new InAppWalletOptions(
    authprovider: AuthProvider.AuthEndpoint, 
    jwtOrPayload: "mypayload", 
    encryptionKey: "myencryptionkey"
);
var options = new WalletOptions(
    provider: WalletProvider.InAppWallet, 
    chainId: 1, 
    inAppWalletOptions: inAppWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

### Inicio de sesión como Invitado - Facilita la incorporación, vincula otras cuentas más tarde

```csharp
var inAppWalletOptions = new InAppWalletOptions(
    authprovider: AuthProvider.Guest
);
var options = new WalletOptions(
    provider: WalletProvider.EcosystemWallet, 
    chainId: 1, 
    inAppWalletOptions: inAppWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

## Vinculación de Cuentas

Las billeteras In-App soportan vincular múltiples métodos de autenticación a una sola billetera, por ejemplo, vincular Google a tu billetera In-App basada en correo electrónico. Esto es útil para tener una identidad unificada a través de plataformas.

```csharp
// Tu cuenta principal de InAppWallet, ya autenticada y conectada
InAppWallet mainInAppWallet = ...

// Una InAppWallet con un nuevo proveedor de autenticación para vincular a la cuenta principal, no conectada
InAppWallet walletToLink = await InAppWallet.Create(client: Client, authProvider: AuthProvider.Telegram);

// Vincular Cuenta - Versión sin interfaz gráfica
var linkedAccounts = await mainInAppWallet.LinkAccount(walletToLink: walletToLink);

// Vincular Cuenta - Versión con el wrapper de Unity
var linkedAccounts = await ThirdwebManager.Instance.LinkAccount(mainInAppWallet, walletToLink);

// También puedes obtener las cuentas vinculadas en cualquier momento
List<LinkedAccount> linkedAccounts = await mainInAppWallet.GetLinkedAccounts();

// Desvincular una cuenta
List<LinkedAccount> linkedAccounts = await mainInAppWallet.UnlinkAccount(linkedAccounts[0]);
```

<ArticleIconCard
	href="/dotnet/wallets/providers/in-app-wallet"
	icon={GraduationCap}
	title="Learn more about InAppWallet"
/>

import { Details, Callout, createMetadata, ArticleIconCard } from "@doc";
import { GraduationCap } from "lucide-react";

export const metadata = createMetadata({
	title: "EcosystemWallet | SDK de thirdweb para Unity",
	description:
		"Instancia un EcosystemWallet para firmar transacciones y mensajes.",
});

# EcosystemWallet

`EcosystemWallet` es la opción de proveedor de billetera persistente definitiva para tu juego. Soporta correo electrónico, teléfono, redes sociales y esquemas de autenticación personalizados, y persistirá a través de dispositivos, plataformas y otros SDKs.

Es una excelente opción para un administrador/firmante de [SmartWallet](/unity/v5/wallets/account-abstraction) y asegurará que tus usuarios puedan tener la misma dirección de billetera en todos tus juegos, aplicaciones y cadenas de bloques.

Las Billeteras de Ecosistema tienen una API muy similar a la de la [Billetera In-App](/unity/v5/wallets/in-app-wallet), pero con el beneficio adicional de poder compartir tus billeteras con socios del ecosistema mediante identificadores especiales que ellos pueden usar, preservando la identidad del usuario no solo a través de tus aplicaciones y juegos, sino también con otros socios del ecosistema. Es segura, fácil de usar y utiliza tecnología de enclaves para proteger los datos del usuario. Todos los ejemplos a continuación pueden aceptar un `ecosystemPartnerId` si eres el socio del ecosistema integrándote con un ecosistema de terceros.

## Métodos de Inicio de Sesión

Las Billeteras de Ecosistema soportan una variedad de métodos de inicio de sesión:
- Correo Electrónico (Inicio de sesión OTP)
- Teléfono (Inicio de sesión OTP)
- Redes Sociales (Google, Apple, Facebook, Telegram, Farcaster, Line, Github, Twitch, Steam, etc.)
- SIWE (Inicio de sesión con Ethereum)
- Autenticación Personalizada (Compatible con OIDC)
- Autenticación Personalizada (Endpoint de Autenticación Genérico)
- Invitado (Facilita la incorporación, vincula otras cuentas más tarde)

### Inicio de sesión con Correo Electrónico

```csharp
var ecosystemWalletOptions = new EcosystemWalletOptions(
    ecosystemId: "ecosystem.your-ecosystem", 
    email: "myepicemail@domain.id"
);
var options = new WalletOptions(
    provider: WalletProvider.EcosystemWallet, 
    chainId: 1, 
    ecosystemWalletOptions: ecosystemWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

Instanciará `EcosystemWalletModal` o reanudará la sesión: un prefab simple que verificará el OTP del usuario.

### Inicio de sesión con Teléfono

```csharp
var ecosystemWalletOptions = new EcosystemWalletOptions(
    ecosystemId: "ecosystem.your-ecosystem", 
    phoneNumber: "+1234567890"
);
var options = new WalletOptions(
    provider: WalletProvider.EcosystemWallet, 
    chainId: 1, 
    ecosystemWalletOptions: ecosystemWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

Instanciará `EcosystemWalletModal` o reanudará la sesión: un prefab simple que verificará el OTP del usuario.

### Inicio de sesión con Redes Sociales (Google, Apple, Facebook, etc.)

```csharp
var ecosystemWalletOptions = new EcosystemWalletOptions(
    ecosystemId: "ecosystem.your-ecosystem", 
    authprovider: AuthProvider.Google
);
var options = new WalletOptions(
    provider: WalletProvider.EcosystemWallet, 
    chainId: 1, 
    ecosystemWalletOptions: ecosystemWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

Abrirá un navegador nativo o una sesión OAuth para autenticar al usuario y redirigirlo de vuelta al juego.

### Inicio de sesión con SIWE

```csharp
var ecosystemWalletOptions = new EcosystemWalletOptions(
    ecosystemId: "ecosystem.your-ecosystem", 
    authprovider: AuthProvider.Siwe, 
    siweSigner: anyExternalWallet
);
var options = new WalletOptions(
    provider: WalletProvider.EcosystemWallet, 
    chainId: 1,
    ecosystemWalletOptions: ecosystemWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

Usará la billetera externa para firmar un mensaje e iniciar sesión en la EcosystemWallet.

### Inicio de sesión con Autenticación Personalizada - Compatible con OIDC

```csharp
var ecosystemWalletOptions = new EcosystemWalletOptions(
    ecosystemId: "ecosystem.your-ecosystem", 
    authprovider: AuthProvider.JWT, 
    jwtOrPayload: "myjwt"
);
var options = new WalletOptions(
    provider: WalletProvider.EcosystemWallet, 
    chainId: 1, 
    ecosystemWalletOptions: ecosystemWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

### Inicio de sesión con Autenticación Personalizada - Endpoint de Autenticación Genérico

```csharp
var ecosystemWalletOptions = new EcosystemWalletOptions(
    ecosystemId: "ecosystem.your-ecosystem", 
    authprovider: AuthProvider.AuthEndpoint, 
    jwtOrPayload: "mypayload"
);
var options = new WalletOptions(
    provider: WalletProvider.EcosystemWallet, 
    chainId: 1, 
    ecosystemWalletOptions: ecosystemWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

### Inicio de sesión como Invitado - Facilita la incorporación, vincula otras cuentas más tarde

```csharp
var ecosystemWalletOptions = new EcosystemWalletOptions(
    ecosystemId: "ecosystem.your-ecosystem", 
    authprovider: AuthProvider.Guest
);
var options = new WalletOptions(
    provider: WalletProvider.EcosystemWallet, 
    chainId: 1, 
    ecosystemWalletOptions: ecosystemWalletOptions
);
var wallet = await ThirdwebManager.Instance.ConnectWallet(options);
```

## Vinculación de Cuentas

Las Billeteras de Ecosistema soportan vincular múltiples métodos de autenticación a una sola billetera, por ejemplo, vincular Google a tu billetera In-App basada en correo electrónico. Esto es útil para tener una identidad unificada a través de plataformas.

```csharp
// Tu cuenta principal de EcosystemWallet, ya autenticada y conectada
EcosystemWallet mainEcosystemWallet = ...

// Una EcosystemWallet con un nuevo proveedor de autenticación para vincular a la cuenta principal, no conectada
EcosystemWallet walletToLink = await EcosystemWallet.Create(client: Client, ecosystemId: "ecosystem.tu-ecosistema", authProvider: AuthProvider.Telegram);

// Vincular Cuenta - Versión sin interfaz gráfica
var linkedAccounts = await mainEcosystemWallet.LinkAccount(walletToLink: walletToLink);

// Vincular Cuenta - Versión con el wrapper de Unity
var linkedAccounts = await ThirdwebManager.Instance.LinkAccount(mainEcosystemWallet, walletToLink);

// También puedes obtener las cuentas vinculadas en cualquier momento
List<LinkedAccount> linkedAccounts = await mainEcosystemWallet.GetLinkedAccounts();

// Desvincular una cuenta
List<LinkedAccount> linkedAccounts = await mainEcosystemWallet.UnlinkAccount(linkedAccounts[0]);
```

<ArticleIconCard
	href="/dotnet/wallets/providers/ecosystem-wallet"
	icon={GraduationCap}
	title="Learn more about EcosystemWallet"
/>
